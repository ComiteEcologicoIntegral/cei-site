{"version":3,"sources":["components/Header.js","components/Footer.js","components/Recomendaciones.js","components/MapaFiltros.js","components/Marcador.js","components/WrapperMapa.js","handlers/data.js","redux/reducers.js","hooks/useSensorData.js","Mapa.js","components/RHFiltros.js","components/Grafica.js","Registro.js","components/ComparaFiltros.js","Compara.js","App.js","reportWebVitals.js","redux/config.js","index.js","handlers/statusCriteria.js","constants.js"],"names":["Header","useState","expanded","setExpanded","Navbar","variant","expand","Brand","to","src","width","height","className","alt","Text","Toggle","aria-controls","onClick","Collapse","id","Nav","activeClassName","exact","Footer","href","Recomendaciones","props","Tab","Container","fill","activeKey","selected","Item","NavLink","eventKey","Content","Pane","systemOptions","value","label","opt","intervalos","MapaFiltros","onApply","sensorData","useSelector","state","systemChosen","setSystemChosen","locationOptions","useMemo","filter","sensor","Longitud","Latitud","Sistema","idBlacklist","includes","Sensor_id","idBlacklistpriv","map","record","Zona","indicadores","indOptions","setIndOptions","useEffect","show","setShow","location","setLocation","interval","setInterval_","gas","setGas","handleClose","Form","style","fontSize","Row","Col","xs","lg","placeholder","onChange","options","isDisabled","OverlayTrigger","placement","overlay","Tooltip","Button","color","block","Modal","size","onHide","closeButton","Title","Body","showLabel","fixed","toFixed","parseInt","Marcador","ICAR_PM25","ICAR_PM10","ICAR_O3","ICAR_CO","ICAR_NO2","ICAR_SO2","sensor_id","status","position","current","provider","locationStr","labels","lastUpdate","shape","marker","document","createElement","popupRef","useRef","icon","setIcon","updateMarker","useCallback","label_","status_","ReactDOM","render","zIndex","backgroundColor","renderMarker","divIcon","html","popupAnchor","Marker","Popup","ref","type","class","aria-label","display","justifyContent","padding","indicator","units","moment","format","idx","pathname","search","target","name","defaultProps","Wrapper","center","children","MapContainer","scrollWheelZoom","widht","TileLayer","attribution","url","retry","fn","ms","retries","Promise","resolve","reject","then","catch","setTimeout","fetchSummaryDataFn","fetch","apiUrl","res","json","err","fetchSummaryData","dataSlice","createSlice","initialState","sensorDataLastUpdate","reducers","setSensorData","action","Array","isArray","payload","actions","useSensorData","cacheTime","useCache","dispatch","useDispatch","loading","setLoading","data","setData","error","setError","diff","console","finally","mapDefaultProps","zoom","minZoom","Mapa","gases","currentGas","setCurrentGas","loadingSensorData","errorSensorData","setMap","setCenter","pos","setView","animate","airQualityIndex","log","highestAirQualityIndex","mapBlacklist","gasName","preValue","gasStatus","getStatus","markers","gasUnits","utc","Dia","local","length","isPurpleAir","colName","fSensor","find","nGas","gas_","alert","role","Spinner","animation","pointerEvents","trigger","Popover","as","boxSizing","borderRadius","marginRight","border","whenCreated","markerProps","airQualityTags","RHFiltros","createQueryGraph","createQueryCal","radioValue","setRadioValue","updateMainFiltros","sensRaw","setSensRaw","sensores","system","setSystem","sistema","ubicacion","indicador","forEach","element","push","ButtonGroup","toggle","radio","ToggleButton","checked","e","currentTarget","defaultValue","sm","Grafica","setDesde","setHasta","setDesdeHora","setHastaHora","layout","downloadFile","summary","Label","Control","required","event","xl","max","date","min","avg","porcentajes","arribaLimite","buenos","nulos","config","responsive","locale","Calendario","lazy","HeatMap","Registro","summaryData","setSummaryData","queryString","setQueryString","noData","setNoData","desde","hasta","desdeHora","hastaHora","ind","syst","initialDate","endingDate","queryStr","startOf","endOf","getQueryStringToDownload","response","blob","URL","createObjectURL","a","download","addEventListener","clickHandler","revokeObjectURL","removeEventListener","click","hasOwnProperty","fechasArray","plot","x","fecha","time","duration","subtract","split","aria-labelledby","centered","u","i","s","fallback","q","create","indi","ubic","ComparaFiltros","zona","sensorOptions","updateData","formData","modifyData","Group","Compara","numFiltros","filters","setFilters","filterData","index","graph","setLimiteOMS","mode","colors","text","dia","d","Date","hovertemplate","dataPromMovil","colors2","y","moving_average","dataICAR","colors3","ICAR","setGraphData","createGraph","limiteOMS","graphLayout","title","showlegend","hovermode","graphData","filtroDiv","getElementById","parentNode","removeChild","deleteFiltro","ubicaciones","fechas_inicio","fechas_fin","slice","query","queryData","shapes","min1","max1","min2","max2","min3","max3","min4","max4","min5","max5","xref","x0","y0","x1","y1","fillcolor","opacity","line","dash","getShapes","annotations","xanchor","yanchor","showarrow","font","family","bgcolor","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","persistedReducer","persistReducer","key","storage","rootReducer","store","createStore","persistor","persistStore","reduxConfig","criteria","PM10","PM25","O3","CO","SO2","NO2","NOM","norm","breakpoints","unidad","process"],"mappings":"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","file":"static/js/main.f618f2b4.chunk.js","sourcesContent":["import { Nav, Navbar } from 'react-bootstrap';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useState } from 'react'\r\n\r\nconst Header = () => {\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n    return (\r\n        <Navbar variant=\"dark\" expand=\"lg\" expanded={expanded}>\r\n            <Navbar.Brand>\r\n                <NavLink to=\"/\">\r\n                    <img\r\n                        src=\"/logo.jpg\"\r\n                        width=\"40\"\r\n                        height=\"40\"\r\n                        className=\"d-inline-block align-top\"\r\n                        alt=\"React Bootstrap logo\"\r\n                    />\r\n                </NavLink>\r\n            </Navbar.Brand>\r\n            <Navbar.Text>\r\n                <h1 className=\"white h1-nav mb-0\">Comité Ecológico Integral (Beta)</h1>\r\n            </Navbar.Text>\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" onClick={() => setExpanded(expanded ? false : \"expanded\")} />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\">\r\n                <Nav className=\"ml-auto\">\r\n                    <NavLink onClick={() => setExpanded(false)} activeClassName=\"nav-active\" className=\"menu-link\" exact to=\"/\">Mapa</NavLink>\r\n                    <NavLink onClick={() => setExpanded(false)} activeClassName=\"nav-active\" className=\"menu-link\" to=\"/registro\">Registro histórico</NavLink>\r\n                    <NavLink onClick={() => setExpanded(false)} activeClassName=\"nav-active\" className=\"menu-link\" to=\"/compara\">Compara datos</NavLink>\r\n                    <NavLink onClick={() => setExpanded(false)} activeClassName=\"nav-active\" className=\"menu-link\" to=\"/\">Acerca de</NavLink>\r\n                </Nav>\r\n            </Navbar.Collapse>\r\n        </Navbar>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import React from 'react';\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer>\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-auto py-3\">\r\n                        <p className=\"mb-1 mt-2\">\r\n                            Los datos oficiales provienen de{' '}\r\n                            <a className='text-white' href=\"https://sinaica.inecc.gob.mx/\">Sinaica</a>{' '}\r\n                            y de <a className='text-white' href=\"http://aire.nl.gob.mx/\">Sima</a>\r\n                        </p>\r\n                        <p className=\"mb-1\">Patrocinado por Natuuramika® 2021</p>\r\n                        <p>Proyecto Solidario TEC de Monterrey</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default Footer;\r\n","import { Nav, NavLink, Tab } from 'react-bootstrap'\r\n\r\nconst Recomendaciones = (props) => {\r\n    return (\r\n        <div className=\"container mt-5 mb-3\">\r\n            <div className=\"ta-center mb-5\">\r\n                <h3>Concentración horaria</h3>\r\n                <p>Conoce las recomendaciones según el índice de calidad del aire</p>\r\n            </div>\r\n            <Tab.Container fill activeKey={props.selected ?? \"buena\"} className=\"recomendaciones h-100\">\r\n                <Nav fill>\r\n                    <Nav.Item>\r\n                        <NavLink eventKey=\"buena\" className=\"nav-buena\">Buena</NavLink>\r\n                    </Nav.Item>\r\n                    <Nav.Item>\r\n                        <NavLink eventKey=\"acept\" className=\"nav-acept\">Aceptable</NavLink>\r\n                    </Nav.Item>\r\n                    <Nav.Item>\r\n                        <NavLink eventKey=\"mala\" className=\"nav-mala\">Mala</NavLink>\r\n                    </Nav.Item>\r\n                    <Nav.Item>\r\n                        <NavLink eventKey=\"muy\" className=\"nav-muy\">Muy Mala</NavLink>\r\n                    </Nav.Item>\r\n                    <Nav.Item>\r\n                        <NavLink eventKey=\"ext\" className=\"nav-ext\">Extremadamente Mala</NavLink>\r\n                    </Nav.Item>\r\n                </Nav>\r\n\r\n                <Tab.Content>\r\n                    <Tab.Pane eventKey=\"buena\">\r\n                        <ul>\r\n                            <li>Realizar actividades al aire libre</li>\r\n                            <li>Ejercitarse al aire libre</li>\r\n                            <li>Sin riesgo para personas vulnerables</li>\r\n                        </ul>\r\n                    </Tab.Pane>\r\n                    <Tab.Pane eventKey=\"acept\">\r\n                        <ul>\r\n                            <li>Realizar actividades al aire libre</li>\r\n                            <li>Ejercitarse al aire libre</li>\r\n                            <li>Personas vulnerables limitar actividades físicas</li>\r\n                        </ul>\r\n                    </Tab.Pane>\r\n                    <Tab.Pane eventKey=\"mala\">\r\n                        <ul>\r\n                            <li>Limitar actividades físicas al aire libre, incrementar frecuencia de descansos, vigilar que estudiantes no presenten síntomas de afecciones respiratorias.</li>\r\n                            <li>Limitar tiempo de exposición</li>\r\n                            <li>Personas vulnerables permanecer en interiores sin actividad física</li>\r\n                            <li>Considerar suspender entrenamientos y partidos de ligas deportivas y actividades físicas extracurriculares</li>\r\n                            <li>Se recomienda el uso de mascarillas reutilizables N95 con certificación NIOSH*</li>\r\n                        </ul>\r\n                    </Tab.Pane>\r\n                    <Tab.Pane eventKey=\"muy\">\r\n                        <ul>\r\n                            <li>Evitar actividades al aire libre</li>\r\n                            <li>Evitar ejercitarse al aire libre o en interiores que no cuenten con sistemas de purificación de aire</li>\r\n                            <li>Cerrar puertas y ventanas</li>\r\n                            <li>Personas vulnerables permanecer en interiores sin actividad física</li>\r\n                            <li>Acudir al médico en caso de síntomas de afectaciones a la salud</li>\r\n                            <li>Evitar fogatas y uso de combustibles sólidos como carbón o leña</li>\r\n                            <li>Suspender entrenamientos y partidos de ligas deportivas y actividades físicas extracurriculares</li>\r\n                            <li>Suspender el uso de cigarros de cualquier tipo</li>\r\n                            <li>Limitar el uso de vehículos que usen combustibles fósiles</li>\r\n                            <li>Se recomienda fuertemente el uso de mascarillas reutilizables N95 con certificación NIOSH*</li>\r\n                        </ul>\r\n                    </Tab.Pane>\r\n                    <Tab.Pane eventKey=\"ext\">\r\n                        <ul>\r\n                            <li>Evitar actividades al aire libre</li>\r\n                            <li>Evitar ejercitarse al aire libre o en interiores que no cuenten con sistemas de purificación de aire</li>\r\n                            <li>Cerrar puertas y ventanas</li>\r\n                            <li>Personas vulnerables permanecer en interiores sin actividad física</li>\r\n                            <li>Acudir al médico o solicitar servicios de emergencias en caso de síntomas de afectaciones a la salud</li>\r\n                            <li>Evitar fogatas y uso de combustibles sólidos como carbón o leña</li>\r\n                            <li>Se recomienda fuertemente el uso de mascarillas reutilizables N95 con certificación NIOSH*</li>\r\n                            <li>Suspender entrenamientos y partidos de ligas deportivas y actividades físicas extracurriculares</li>\r\n                            <li>Suspender el uso de cigarros de cualquier tipo</li>\r\n                            <li>Limitar el uso de vehículos que usen combustibles fósiles</li>\r\n                        </ul>\r\n                    </Tab.Pane>\r\n                </Tab.Content>\r\n            </Tab.Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Recomendaciones\r\n","import { useMemo, useState, useEffect } from 'react';\r\nimport {\r\n    Form,\r\n    Modal,\r\n    Button,\r\n    Col,\r\n    Row,\r\n    Tooltip,\r\n    OverlayTrigger,\r\n} from 'react-bootstrap';\r\nimport { BsInfoCircle } from 'react-icons/bs';\r\nimport { useSelector } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport { indicadores, idBlacklist, idBlacklistpriv } from '../constants'\r\n\r\nconst systemOptions = [\r\n    {value: \"PurpleAir\", label: 'PurpleAir', opt: 'P'},\r\n    {value: \"AireNuevoLeon\", label: 'AireNuevoLeon', opt: 'G'}\r\n]\r\n\r\nconst intervalos =  [\r\n    {value: '1', label: 'Tiempo real'},\r\n    {value: '2', label: '12 horas'},\r\n    {value: '3', label: '24 horas'},\r\n    {value: '4', label: 'Última semana'},\r\n    {value: '5', label: 'Último mes'},\r\n    {value: '6', label: 'Último año'}\r\n]\r\n\r\nconst MapaFiltros = ({ onApply }) => {\r\n    const { sensorData } = useSelector((state) => state);\r\n    const [systemChosen, setSystemChosen] = useState(\"\");\r\n    const locationOptions = useMemo(() => {\r\n        return sensorData\r\n            .filter(\r\n                (sensor) =>\r\n                    typeof sensor.Longitud === 'number' &&\r\n                    typeof sensor.Latitud === 'number' && \r\n                    sensor.Sistema === systemChosen.label &&\r\n                    !idBlacklist.includes(sensor.Sensor_id) &&\r\n                    !idBlacklistpriv.includes(sensor.Sensor_id)\r\n            )\r\n            .map((record) => ({\r\n                value: record.Sensor_id,\r\n                label: record.Zona,\r\n            }));\r\n    }, [sensorData, systemChosen]);\r\n\r\n    const [indOptions, setIndOptions] = useState(indicadores);\r\n\r\n    useEffect(() => {\r\n        systemChosen.label === 'PurpleAir' ? setIndOptions([indicadores[0]]) : setIndOptions(indicadores)\r\n    }, [systemChosen]); // Updatea los gases disponibles cuando cambia la variable sistemas\r\n\r\n    const [show, setShow] = useState(false);\r\n    const [location, setLocation] = useState(null);\r\n    const [interval, setInterval_] = useState(intervalos[0]);\r\n    const [gas, setGas] = useState(indicadores[0]);\r\n\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n   \r\n\r\n\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <Form>\r\n                <p style={{ fontSize: \"0.9em\" }}>*Recuerda que el sistema PurpleAir solo tiene disponible el contaminante PM2.5</p>\r\n                <Form.Row className=\"mapa-filtros\"> \r\n                    <Col className=\"mb-3\" xs={12} lg={4}>\r\n                        <Select\r\n                            placeholder=\"Sistema\"\r\n                            value={systemChosen}\r\n                            onChange={(value) => {\r\n                                setSystemChosen(value)\r\n                                setLocation(null)\r\n                            }}\r\n                            options={systemOptions}\r\n                        />\r\n                        <Select\r\n                            placeholder=\"Ubicación\"\r\n                            value={location}\r\n                            onChange={setLocation}\r\n                            options={locationOptions}\r\n                        />\r\n                    </Col>\r\n                    <Col className=\"mb-3\" xs={6} lg={3}>\r\n                        <Select\r\n                            isDisabled\r\n                            options={intervalos}\r\n                            onChange={setInterval_}\r\n                            value={interval}\r\n                        />\r\n                    </Col>\r\n                    <Col xs={6} lg={3}>\r\n                        <Row>\r\n                            <Col xs={10}>\r\n                                <Select\r\n                                    options={indOptions}\r\n                                    value={gas}\r\n                                    onChange={setGas}\r\n                                />\r\n                            </Col>\r\n                            <Col xs={2}>\r\n                            <OverlayTrigger\r\n                            key='top'\r\n                            placement='top'\r\n                            overlay={\r\n                                <Tooltip>\r\n                                Info. indicadores\r\n                                </Tooltip>\r\n                            }\r\n                            >\r\n                                <Button className=\"info-btn\" variant=\"link\" onClick={handleShow }>\r\n                                    <BsInfoCircle color=\"MediumVioletRed\" />\r\n                                </Button>\r\n                            </OverlayTrigger>\r\n                                \r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                    <Col>\r\n                        <Button\r\n                            className=\"btn-aplicar\"\r\n                            variant=\"primary\"\r\n                            block\r\n                            onClick={() => {\r\n                                onApply({ gas, location, interval });\r\n                                setLocation(null);\r\n                                setInterval_(intervalos[0]);\r\n                            }}\r\n                        >\r\n                            Aplicar\r\n                        </Button>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n  \r\n            <Modal size=\"lg\" show={show} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Indicadores</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">PM 10</span>&emsp; Material Particulado menor a 10 micrómetros</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Mezcla compleja de partículas líquidas o sólidas que provienen de fuentes naturales o de fuentes antropogénicas, poseen un tamaño aerodinámico menor a 10 micrómetros.</p>\r\n                </Row>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">PM 2.5</span>&emsp; Material Particulado menor a 2.5 micrómetros</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Mezcla Compleja de Partículas líquidas o sólidas que provienen principalmente de fuentes antropogénicas, poseen un tamaño aerodinámico menor a 2.5 micrómetros.</p>\r\n                </Row>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">O2</span>&emsp; Ozono</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Gas compuesto por 3 átomos de oxigeno que se encuentra principalmente en la estratosfera, puede formarse a nivel superficial debido a condiciones de alta radiación y temperatura.</p>\r\n                </Row>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">CO</span>&emsp; Monóxido de Carbono</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Gas incoloro que se forma principalmente por la combustión de gasolinas, leña o carbón, este compuesto, en altas concentraciones puede ser muy nocivo a la salud.</p>\r\n                </Row>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">SO2</span>&emsp; Dióxido de Azufre</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Es un gas formado por 2 átomos de oxígeno y uno de azufre, se forma principalmente por la combustión de combustibles fósiles con alto contenido de azufre.</p>\r\n                </Row>\r\n                <Row>\r\n                    <h3 className=\"mod-sub\"><span className=\"mod-ind morado\">NO2</span>&emsp; Dióxido de Nitrógeno</h3>\r\n                </Row>\r\n                <Row>\r\n                    <p className=\"mod-desc\">Molécula con 2 átomos de oxígeno y uno de Nitrógeno que se produce principalmente por la combustión de combustibles fósiles empleados en vehículos y plantas de energía.</p>\r\n                </Row>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleClose}>\r\n                Cerrar\r\n                </Button>\r\n            </Modal.Footer>\r\n            </Modal>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MapaFiltros;\r\n","import React, {\r\n    useCallback,\r\n    useEffect,\r\n    useMemo,\r\n    useRef,\r\n    useState,\r\n} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { divIcon } from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Marker, Popup } from 'react-leaflet';\r\nimport { Button, Form, Col } from 'react-bootstrap';\r\nimport moment from 'moment';\r\n\r\n\r\nconst showLabel = (label) => {\r\n    if (typeof label != 'number') return label;\r\n    const fixed = label.toFixed(2);\r\n    if (parseInt(fixed) === label) return label\r\n    return fixed;\r\n};\r\n\r\nconst renderMarker = (label, status, shape = 'round') => {\r\n    return (\r\n        <div\r\n            className=\"marker-wrapper\"\r\n            style={{ zIndex: shape === 'round' ? -1 : -10 }}\r\n        >\r\n            <div\r\n                className={`marker-${status} marker-base marker-shape-${shape}`}\r\n            ></div>\r\n            <span\r\n                className={`marker-${status}`}\r\n                style={{ backgroundColor: 'transparent' }}\r\n            >\r\n                {showLabel(label)}\r\n            </span>\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Marcador\r\n * @augments {Component<Props, State>}\r\n */\r\nfunction Marcador({\r\n    ICAR_PM25,\r\n    ICAR_PM10,\r\n    ICAR_O3,\r\n    ICAR_CO,\r\n    ICAR_NO2,\r\n    ICAR_SO2,\r\n    sensor_id,\r\n    label,\r\n    status,\r\n    position,\r\n    current,\r\n    provider,\r\n    locationStr,\r\n    labels,\r\n    lastUpdate,\r\n    map,\r\n    shape = 'round',\r\n    ...props\r\n}) {\r\n    const marker = useMemo(() => document.createElement('div'), []);\r\n    const popupRef = useRef();\r\n    const [icon, setIcon] = useState(null);\r\n\r\n    const updateMarker = useCallback(\r\n        (label_, status_) => {\r\n            ReactDOM.render(renderMarker(label_, status_, shape), marker);\r\n\r\n            setIcon(\r\n                divIcon({\r\n                    html: marker,\r\n                    className: `sensor-icon ${shape === 'round' ? '' : 'behind'\r\n                        }`,\r\n                    popupAnchor: [7, 0],\r\n                })\r\n            );\r\n        },\r\n        [shape]\r\n    );\r\n\r\n    useEffect(() => {\r\n        updateMarker(label, status);\r\n    }, [label, status, updateMarker]);\r\n\r\n    if (!icon) return null;\r\n\r\n    return (\r\n\r\n        <Marker position={position} icon={icon} {...props}>\r\n            <Popup\r\n                ref={popupRef}\r\n                className=\"custom-popup\"\r\n                closeButton={(props) => (\r\n                    <button\r\n                        {...props}\r\n                        type=\"button\"\r\n                        class=\"btn-close\"\r\n                        aria-label=\"Close\"\r\n                    ></button>\r\n                )}\r\n            >\r\n\r\n                <div className=\"px-3 py-2\">\r\n                    <div\r\n                        className={`rounded marker-${current.status}`}\r\n                        style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'center',\r\n                            padding: '0 0.1rem ',\r\n                        }}\r\n                    >\r\n                        {current.indicator}: {current.label} {current.units}\r\n                    </div>\r\n\r\n                    <div className=\"data-label\">\r\n                        <small className=\"text-muted\">Ubicación</small>\r\n                        <br />\r\n                        <data>{locationStr}</data>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"data-label\">\r\n                        <small className=\"text-muted\">\r\n                            Última actualización\r\n                        </small>\r\n                        <br />\r\n                        <time>\r\n                            {moment(lastUpdate).format(\r\n                                'ddd, MMMM D YYYY, h:mm:ss a'\r\n                            )}\r\n                        </time>\r\n                    </div>\r\n                    <div className=\"data-label2\">\r\n                        <small className=\"text-muted\">Tiempo Real</small>\r\n                        <small className=\"text-muted ml-5\">Indice Calidad Aire</small>\r\n                    </div>\r\n\r\n                    <Form >\r\n                        {labels.map(({ label, status, value, units }, idx) => (\r\n                           sensor_id[0] === 'P' ?\r\n                            label === 'PM2.5' ?\r\n                                <Form.Row \r\n        \r\n                                    key={idx}\r\n                                    className=\"d-flex justify-content-between  mb-1 \"\r\n                                >\r\n                                    <Col xs = {3}>\r\n                                    <Link\r\n                                        to={{\r\n                                            pathname: 'registro',\r\n                                            search: `?gas=${label}`,\r\n                                        }}\r\n                                        \r\n                                    >\r\n                                        {label}\r\n                                    </Link>\r\n                                    </Col>\r\n                                    <Col className={`d-flex justify-content-between px-1 rounded marker-${status}`} xs={5}>\r\n                                \r\n                                    \r\n                                        <span>{value}</span>\r\n                                        <span>{units}</span>\r\n                                    \r\n                                \r\n                                    </Col>\r\n                                    <Col className={`d-flex justify-content-between px-1 rounded marker-${status}`} xs={3}>\r\n                                \r\n                                {\r\n                                        label === 'PM2.5' ?\r\n                                        ICAR_PM25 == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_PM25 == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_PM25.toFixed(2)}</span>\r\n                                        :\r\n                                        label === 'PM10' ?\r\n                                        ICAR_PM10 == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_PM10 == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_PM10.toFixed(0)}</span>\r\n                                        :\r\n                                        label === 'O3' ?\r\n                                        ICAR_O3 == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_O3 == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_O3.toFixed(3)}</span>\r\n                                        :\r\n                                        label === 'CO' ?\r\n                                        ICAR_CO == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_CO == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_CO.toFixed(2)}</span>\r\n                                        :\r\n                                        label === 'NO2' ?\r\n                                        ICAR_NO2 == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_NO2 == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_NO2.toFixed(4)}</span>\r\n                                        :\r\n                                        label === 'SO2' ?\r\n                                        ICAR_SO2 == '-1.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        ICAR_SO2 == '0.00' ?\r\n                                        <span>{'ND'}</span>\r\n                                        :\r\n                                        <span>{ICAR_SO2.toFixed(4)}</span>\r\n                                        :\r\n                                        <span>{'ND'}</span>\r\n                                } \r\n                            \r\n                            </Col>\r\n                            </Form.Row>\r\n                            :\r\n                            null \r\n                        :\r\n                        <Form.Row \r\n                                key={idx}\r\n                                className=\"d-flex justify-content-between  mb-1 \"\r\n                            >\r\n                                <Col xs={3}>\r\n                                    <Link\r\n                                        to={{\r\n                                            pathname: 'registro',\r\n                                            search: `?gas=${label}`,\r\n                                        }}\r\n\r\n                                    >\r\n                                        {label}\r\n                                    </Link>\r\n                                </Col>\r\n                                <Col className={`d-flex justify-content-between px-1 rounded marker-${status}`} xs={5}>                         \r\n                              \r\n                                    <span>{value}</span>\r\n                                    <span>{units}</span>\r\n                                \r\n                            \r\n                                </Col>\r\n                                <Col className={`d-flex justify-content-between px-1 rounded marker-${status}`} xs={3}>\r\n                            \r\n                            {\r\n                                    label === 'PM2.5' ?\r\n                                    ICAR_PM25 == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_PM25 == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_PM25.toFixed(2)}</span>\r\n                                    :\r\n                                    label === 'PM10' ?\r\n                                    ICAR_PM10 == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_PM10 == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_PM10.toFixed(0)}</span>\r\n                                    :\r\n                                    label === 'O3' ?\r\n                                    ICAR_O3 == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_O3 == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_O3.toFixed(3)}</span>\r\n                                    :\r\n                                    label === 'CO' ?\r\n                                    ICAR_CO == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_CO == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_CO.toFixed(2)}</span>\r\n                                    :\r\n                                    label === 'NO2' ?\r\n                                    ICAR_NO2 == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_NO2 == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_NO2.toFixed(4)}</span>\r\n                                    :\r\n                                    label === 'SO2' ?\r\n                                    ICAR_SO2 == '-1.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    ICAR_SO2 == '0.00' ?\r\n                                    <span>{'ND'}</span>\r\n                                    :\r\n                                    <span>{ICAR_SO2.toFixed(4)}</span>\r\n                                    :\r\n                                    <span>{'ND'}</span>\r\n                            } \r\n\r\n                        </Col>\r\n                        </Form.Row>\r\n                        ))}\r\n                    </Form>\r\n                </div>\r\n\r\n                <div className=\"py-2 px-3 border-top text-center\">\r\n                    <Button size=\"sm\">Más información</Button>\r\n                    <p className=\"lh-sm mt-2 mb-0\">\r\n                        Fuente(s): <a target='blank' href={provider.ref}>{provider.name}</a>\r\n                    </p>\r\n                </div>\r\n            </Popup>\r\n        </Marker>\r\n    );\r\n}\r\n\r\nMarcador.defaultProps = {};\r\n\r\nMarcador.propTypes = {\r\n    /**\r\n     * Etiqueta del indicador que muestra el popup\r\n     */\r\n    indicator: PropTypes.string,\r\n\r\n    /**\r\n     * Informacion del indicador que muestra el popup\r\n     */\r\n    current: PropTypes.shape({\r\n        label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        status: PropTypes.number,\r\n        units: PropTypes.string,\r\n    }),\r\n\r\n    /**\r\n     * Fecha de la ultima actualización del sensor en milisegundos\r\n     */\r\n    lastUpdate: PropTypes.instanceOf(Date),\r\n\r\n    /**\r\n     * Etiqueta de la ubicación del sensor\r\n     */\r\n    locationStr: PropTypes.string,\r\n\r\n    /**\r\n     * LatLng del marcador\r\n     */\r\n    position: PropTypes.arrayOf(PropTypes.number),\r\n\r\n    /**\r\n     * Informacion de la fuente del sensor (e.g. Purple Air, Sinaica, etc.)\r\n     */\r\n    provider: PropTypes.shape({\r\n        name: PropTypes.string,\r\n        ref: PropTypes.string,\r\n    }),\r\n\r\n    /**\r\n     * Informacion de todos los indicadores del sensor\r\n     */\r\n    labels: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            indicator: PropTypes.string,\r\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n            status: PropTypes.number,\r\n            units: PropTypes.string,\r\n            ref: PropTypes.string,\r\n        })\r\n    ),\r\n};\r\n\r\nexport default Marcador;\r\n","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport '../styles/marker.css';\r\nimport { MapContainer, TileLayer } from 'react-leaflet';\r\n\r\n/**\r\n * Wrapper\r\n * @augments {Component<Props, State>}\r\n */\r\nfunction Wrapper({ center, children, ...props }) {\r\n    return (\r\n        <MapContainer\r\n            center={center}\r\n            scrollWheelZoom={false}\r\n            style={{\r\n                height: '100%',\r\n                widht: '100%',\r\n            }}\r\n            {...props}\r\n        >\r\n            <TileLayer\r\n                attribution='&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors'\r\n                url=\"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png?api_key=e4368efd-701c-4da6-8372-03f4040a622a\"\r\n            />\r\n            {children}\r\n        </MapContainer>\r\n    );\r\n}\r\n\r\nWrapper.defaultProps = {};\r\n\r\nWrapper.propTypes = {\r\n    /**\r\n     * Nodos hijos del mapa (solo elementos de leaflet)\r\n     */\r\n    children: PropTypes.node,\r\n\r\n    /**\r\n     * Un arreglo [lat, lng] con la posición del centro del mapa\r\n     */\r\n    center: PropTypes.arrayOf(PropTypes.number),\r\n\r\n    setMap: PropTypes.func,\r\n};\r\n\r\nexport default Wrapper;\r\n","import { apiUrl } from '../constants';\r\n\r\nconst retry = (fn, ms = 1000, retries = 5) =>\r\n    new Promise((resolve, reject) => {\r\n        fn()\r\n            .then(resolve)\r\n            .catch(() => {\r\n                setTimeout(() => {\r\n                    if (!retries) {\r\n                        return reject(\r\n                            'Se excedió el número máximo de intentos'\r\n                        );\r\n                    }\r\n                    retry(fn, ms, retries - 1).then(resolve, reject);\r\n                }, ms);\r\n            });\r\n    });\r\n\r\nconst fetchSummaryDataFn = () =>\r\n    new Promise((resolve, reject) => {\r\n        fetch(`${apiUrl}/sensor-summary`)\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n                    return res.json();\r\n                } else {\r\n                    reject();\r\n                }\r\n            })\r\n            .then((json) => {\r\n                resolve(json);\r\n            })\r\n            .catch((err) => reject(err));\r\n    });\r\n\r\nexport const fetchSummaryData = () => {\r\n    return retry(fetchSummaryDataFn);\r\n};\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport moment from 'moment';\r\n\r\nconst initialState = { sensorData: [], sensorDataLastUpdate: null };\r\n\r\nconst dataSlice = createSlice({\r\n    name: 'data',\r\n    initialState,\r\n    reducers: {\r\n        setSensorData(state, action) {\r\n            if (Array.isArray(action.payload)) {\r\n                state.sensorData = action.payload;\r\n                state.sensorDataLastUpdate = moment();\r\n            }\r\n        },\r\n    },\r\n});\r\n\r\nexport const { setSensorData } = dataSlice.actions;\r\nexport default dataSlice.reducer;\r\n","import moment from 'moment';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchSummaryData } from '../handlers/data';\r\nimport { setSensorData } from '../redux/reducers';\r\n\r\nconst useSensorData = ({ cacheTime = 60, useCache = true }) => {\r\n    const { sensorDataLastUpdate, sensorData } = useSelector((state) => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [data, setData] = useState(sensorData);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Llama a la api si los datos se guardaron hace menos de una hora\r\n        const diff = sensorDataLastUpdate && useCache\r\n            ? moment().diff(sensorDataLastUpdate, 'minutes')\r\n            : 999; // Caso sensorDataLastUpdate === null, se tienen que solicitar los datos\r\n\r\n        if (diff > cacheTime) {\r\n            fetchSummaryData()\r\n                .then((data) => {\r\n                    dispatch(setSensorData(data));\r\n                    setData(data);\r\n                })\r\n                .catch((err) => {\r\n                    console.error(err);\r\n                    setData([]);\r\n                    setError(err);\r\n                })\r\n                .finally(() => setLoading(false));\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [sensorDataLastUpdate, dispatch, cacheTime, useCache]);\r\n\r\n    return { loading, data, error };\r\n};\r\n\r\nexport default useSensorData;\r\n","import React, { useCallback, useMemo, useState } from \"react\";\r\nimport Recomendaciones from \"./components/Recomendaciones.js\";\r\nimport MapaFiltros from \"./components/MapaFiltros.js\";\r\nimport Marcador from \"./components/Marcador.js\";\r\nimport Wrapper from \"./components/WrapperMapa.js\";\r\n\r\nimport { gases, mapBlacklist, idBlacklist } from \"./constants.js\";\r\nimport { getStatus, airQualityTags } from \"./handlers/statusCriteria.js\";\r\nimport useSensorData from \"./hooks/useSensorData.js\";\r\nimport { Spinner, OverlayTrigger, Popover, Button } from \"react-bootstrap\";\r\nimport moment from \"moment\";\r\n\r\nconst mapDefaultProps = {\r\n  center: [25.67, -100.25],\r\n  zoom: 11,\r\n  minZoom: 10,\r\n};\r\n\r\nfunction Mapa() {\r\n  const [currentGas, setCurrentGas] = useState(gases[0]);\r\n  const {\r\n    data: sensorData,\r\n    loading: loadingSensorData,\r\n    error: errorSensorData,\r\n  } = useSensorData({});\r\n\r\n  const [map, setMap] = useState(null);\r\n\r\n  const setCenter = useCallback(\r\n    (pos) => {\r\n      if (map) {\r\n        // setLastCenter(pos);\r\n        map.setView(pos, mapDefaultProps.zoom, {\r\n          animate: true,\r\n        });\r\n      }\r\n    },\r\n    [map]\r\n  );\r\n\r\n  const airQualityIndex = useMemo(\r\n    () => {\r\n      if (sensorData == null) {\r\n        console.log(\"No data yet\");\r\n        return 0;\r\n      }\r\n\r\n      let highestAirQualityIndex = 0;\r\n\r\n      const filteredSensors = sensorData.filter(\r\n        (sensor) =>\r\n          typeof sensor.Longitud === \"number\" &&\r\n          typeof sensor.Latitud === \"number\" &&\r\n          !mapBlacklist.includes(sensor.Sistema) &&\r\n          !idBlacklist.includes(sensor.Sensor_id)\r\n      );\r\n\r\n      filteredSensors.map((data) => {\r\n        const { name: gasName, units: gasUnits } = currentGas;\r\n\r\n        let preValue =\r\n          gasName === \"PM25\"\r\n            ? data.Sistema === \"PurpleAir\"\r\n              ? data[\"PM25_Promedio\"]\r\n              : data[gasName]\r\n            : data[gasName];\r\n\r\n        const value = typeof preValue === \"number\" ? preValue : \"ND\";\r\n\r\n        const gasStatus = getStatus(gasName, value);\r\n        if (gasStatus > highestAirQualityIndex) {\r\n          highestAirQualityIndex = gasStatus;\r\n        }\r\n      });\r\n\r\n      return highestAirQualityIndex;\r\n    },  \r\n    [sensorData]\r\n  );\r\n\r\n  const markers = useMemo(() => {\r\n    const filteredSensors = sensorData.filter(\r\n      (sensor) =>\r\n        typeof sensor.Longitud === \"number\" &&\r\n        typeof sensor.Latitud === \"number\" &&\r\n        !mapBlacklist.includes(sensor.Sistema) &&\r\n        !idBlacklist.includes(sensor.Sensor_id)\r\n    );\r\n    \r\n    const resultingData = filteredSensors.map((data) => {\r\n      const { name: gasName, units: gasUnits } = currentGas;\r\n\r\n      let preValue =\r\n        gasName === \"PM25\"\r\n          ? data.Sistema === \"PurpleAir\"\r\n            ? data[\"PM25_Promedio\"]\r\n            : data[gasName]\r\n          : data[gasName];\r\n\r\n      const value = typeof preValue === \"number\" ? preValue : \"ND\";\r\n\r\n      // const gasStatus = getStatus(gasName, value);\r\n      // if (gasStatus > highestAirQualityIndex) {\r\n      //   highestAirQualityIndex = gasStatus;\r\n      // }\r\n\r\n      return {\r\n        ICAR_PM25: +data.ICAR_PM25,\r\n        // ICAR_PM10: data.Sensor_id[0] != 'P' ? +data.ICAR_PM10 : 'ND',\r\n        ICAR_PM10: +data.ICAR_PM10,\r\n        ICAR_O3: +data.ICAR_O3,\r\n        ICAR_CO: +data.ICAR_CO,\r\n        ICAR_NO2: +data.ICAR_NO2,\r\n        ICAR_SO2: +data.ICAR_SO2,\r\n        sensor_id: data.Sensor_id,\r\n        position: [data.Latitud, data.Longitud],\r\n        current: {\r\n          indicator: currentGas.label ? currentGas.label : gasName,\r\n          label: value,\r\n          units: gasUnits,\r\n          status: value !== \"ND\" ? getStatus(gasName, value) : 99,\r\n          ref: \"#\",\r\n        },\r\n        lastUpdate: moment.utc(data.Dia).local(),\r\n        locationStr: data.Zona?.length > 0 ? data.Zona : \"ND\",\r\n        provider: {\r\n          name: data.Sistema,\r\n          ref: (() => {\r\n            if (data.Sistema === \"PurpleAir\")\r\n              return \"https://www.purpleair.com/map?mylocation\";\r\n            if (data.Sistema === \"AireNuevoLeon\")\r\n              return \"http://aire.nl.gob.mx/\";\r\n            if (data.Sistema === \"Sinaica\")\r\n              return \"https://sinaica.inecc.gob.mx/\";\r\n            return \"#\";\r\n          })(),\r\n        },\r\n        isPurpleAir: data.Sistema === \"PurpleAir\",\r\n        labels: gases.map(({ name, label, units }) => {\r\n          let colName = name;\r\n          if (name === \"PM25\" && data.Sistema === \"PurpleAir\")\r\n            colName = \"PM25_Promedio\";\r\n          return {\r\n            label: label ? label : name,\r\n            units,\r\n            value: typeof data[colName] === \"number\" ? data[colName] : \"ND\",\r\n            status: data[colName] ? getStatus(name, data[colName]) : 99,\r\n            ref: \"#\",\r\n          };\r\n        }),\r\n      };\r\n    });\r\n\r\n    return resultingData;\r\n  }, [sensorData, currentGas]);\r\n\r\n  return (\r\n    <div>\r\n      <MapaFiltros\r\n        onApply={({ gas, location }) => {\r\n          if (location) {\r\n            // Encuentra sensor al que le corresponde la ubicación de los filtros\r\n            const fSensor = sensorData.find(\r\n              (record) => record.Sensor_id === location.value\r\n            );\r\n\r\n            if (fSensor) {\r\n              setCenter([fSensor.Latitud, fSensor.Longitud]);\r\n            }\r\n          } else {\r\n            alert(\"Selecciona una ubicación\");\r\n            return;\r\n          }\r\n\r\n          if (gas) {\r\n            const nGas = gases.find((gas_) => gas_.name === gas.value);\r\n            setCurrentGas(nGas ?? currentGas);\r\n          }\r\n        }}\r\n      />\r\n      <div\r\n        className=\"my-4\"\r\n        style={{\r\n          zIndex: 0,\r\n          position: \"relative\",\r\n          width: \"100%\",\r\n          height: \"500px\",\r\n        }}\r\n      >\r\n        {errorSensorData && (\r\n          <div\r\n            className=\"position-absolute w-100 end-0 p-2\"\r\n            style={{ zIndex: 100 }}\r\n          >\r\n            <div class=\"alert alert-danger\" role=\"alert\">\r\n              Ocurrió un error al cargar los datos.\r\n            </div>\r\n          </div>\r\n        )}\r\n        {loadingSensorData && (\r\n          <div\r\n            className=\"w-100 h-100 d-flex position-absolute\"\r\n            style={{\r\n              zIndex: 100,\r\n              backgroundColor: \"rgba(0,0,0,0.2)\",\r\n            }}\r\n          >\r\n            <div className=\"position-absolute top-50 start-50 translate-middle\">\r\n              <Spinner animation=\"border\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div\r\n          className=\"w-100 h-100 position-absolute p-2\"\r\n          style={{ zIndex: 99, pointerEvents: \"none\" }}\r\n        >\r\n          <div className=\"position-absolute end-0\">\r\n            <OverlayTrigger\r\n              trigger=\"click\"\r\n              placement={\"left\"}\r\n              overlay={\r\n                <Popover>\r\n                  <Popover.Title as=\"h3\">Leyenda</Popover.Title>\r\n                  <Popover.Content>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div\r\n                        style={{\r\n                          boxSizing: \"border-box\",\r\n                          borderRadius: \"100%\",\r\n                          width: \"35px\",\r\n                          height: \"20px\",\r\n                          marginRight: \"0.75rem\",\r\n                          padding: 0,\r\n                          border: \"1px solid black\",\r\n                        }}\r\n                      ></div>\r\n                      Los sensores del estado se representan con un círculo\r\n                    </div>\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <div\r\n                        style={{\r\n                          boxSizing: \"border-box\",\r\n                          width: \"35px\",\r\n                          height: \"20px\",\r\n                          marginRight: \"0.75rem\",\r\n                          padding: 0,\r\n                          border: \"1px solid black\",\r\n                        }}\r\n                      ></div>\r\n                      Los sensores de Purple Air se representan con un cuadrado\r\n                    </div>\r\n                  </Popover.Content>\r\n                </Popover>\r\n              }\r\n            >\r\n              <Button variant=\"link\" className=\"pe-auto\">\r\n                Leyenda\r\n              </Button>\r\n            </OverlayTrigger>\r\n          </div>\r\n        </div>\r\n        <Wrapper whenCreated={setMap} {...mapDefaultProps}>\r\n          {!loadingSensorData &&\r\n            markers.map((markerProps, idx) => { \r\n              return (\r\n                <Marcador\r\n                  map={map}\r\n                  key={idx}\r\n                  {...markerProps}\r\n                  label={markerProps.current.label}\r\n                  indicator={markerProps.current.indicator}\r\n                  status={markerProps.current.status}\r\n                  shape={markerProps.isPurpleAir ? \"square\" : \"round\"}\r\n                />\r\n              );\r\n            })}\r\n        </Wrapper>\r\n      </div>\r\n      <Recomendaciones selected={airQualityTags[airQualityIndex]} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Mapa;\r\n","import moment from 'moment';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { Form, ButtonGroup, Button, Col, ToggleButton } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport { fetchSummaryData } from '../handlers/data';\r\nimport { setSensorData } from '../redux/reducers';\r\nimport { indicadores, idBlacklistpriv } from '../constants'\r\n\r\n// Diferente a la que esta definida en constants porque este debe de decir AireNL/Sinaica junto\r\nconst systemOptions = [\r\n    { value: \"PurpleAir\", label: 'PurpleAir', opt: 'P' },\r\n    { value: \"AireNuevoLeon\", label: 'AireNuevoLeon/Sinaica', opt: 'G' }\r\n]\r\n\r\n// Componente para la página de Registro Histórico\r\nfunction RHFiltros({\r\n    createQueryGraph,\r\n    createQueryCal,\r\n    radioValue,\r\n    setRadioValue,\r\n    updateMainFiltros,\r\n}) {\r\n    /* \r\n        Parámetros:\r\n            - createQueryGraph: función para crear query de la gráfica\r\n            - createQueryCal: función para crear query del calendario\r\n            - radioValue: sección seleccionada\r\n            - setRadioValue: función para cambiar el radioValue\r\n            - updateMainFiltros: función para updatear en el componente padre los inputs seleccionados\r\n    */\r\n\r\n\r\n    const radios = [\r\n        { name: 'Grafica', value: '1' },\r\n        { name: 'Calendario', value: '2' },\r\n    ];\r\n\r\n    const dispatch = useDispatch();\r\n    const { sensorDataLastUpdate, sensorData } = useSelector((state) => state);\r\n\r\n    const [sensRaw, setSensRaw] = useState(null);\r\n    let sensores = [];\r\n\r\n    useEffect(() => {\r\n        // TODO: convertir a hook\r\n        const diff = sensorDataLastUpdate\r\n            ? moment().diff(sensorDataLastUpdate, 'minutes')\r\n            : 999;\r\n\r\n        if (diff > 60) {\r\n            fetchSummaryData()\r\n                .then((data) => {\r\n                    dispatch(setSensorData(data));\r\n                    setSensRaw(data);\r\n                })\r\n                .catch((err) => console.error(err));\r\n        } else {\r\n            setSensRaw(sensorData);\r\n        }\r\n    }, []);\r\n\r\n    const [system, setSystem] = useState(\"\")\r\n    const [indOptions, setIndOptions] = useState(indicadores);\r\n    const [location, setLocation] = useState(null)\r\n\r\n    const sistema = useRef(null);\r\n    const ubicacion = useRef(null);\r\n    const indicador = useRef(indicadores[0]);\r\n\r\n    useEffect(() => {\r\n        system.value === \"PurpleAir\" ? setIndOptions([indicadores[0]]) : setIndOptions(indicadores)\r\n    }, [system]); // Updatea los gases disponibles cuando cambia la variable sistemas\r\n\r\n    // Crear valores para el dropdown:\r\n    if (sensRaw) {\r\n        sensRaw.forEach((element) => {\r\n            if (system.value === element.Sistema &&\r\n                !idBlacklistpriv.includes(element.Sensor_id)) {\r\n                sensores.push({ value: element.Sensor_id, label: element.Zona });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Función general para crear el query\r\n    function createQuery() {\r\n        updateMainFiltros(ubicacion.current, indicador.current, sistema.current); // Actualiza los valores de los filtros en el componente padre\r\n        if (radioValue === '1') {\r\n            createQueryGraph();\r\n        } else {\r\n            createQueryCal();\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"mt-5\">\r\n            <div className=\"ta-center mb-5\">\r\n                <h2>Registro Histórico</h2>\r\n                <p>Consulta los datos históricos de la calidad del aire</p>\r\n            </div>\r\n            <Form>\r\n                <Form.Row className=\"mb-3\">\r\n                    <Col xs={6}>\r\n                        <Select\r\n                            options={systemOptions}\r\n                            placeholder={'Sistema'}\r\n                            onChange={(value) => {\r\n                                setLocation(null)\r\n                                ubicacion.current = null\r\n                                sistema.current = value\r\n                                setSystem(value)\r\n                            }}\r\n                        />\r\n                    </Col>\r\n                    <Col xs={6}>\r\n                        <Select\r\n                            options={sensores}\r\n                            value={location}\r\n                            placeholder={'Ubicación'}\r\n                            onChange={(value) => {\r\n                                setLocation(value)\r\n                                ubicacion.current = value;\r\n                            }}\r\n                        />\r\n                    </Col>\r\n                </Form.Row>\r\n                <Form.Row>\r\n                    <Col>\r\n                        <ButtonGroup toggle>\r\n                            {radios.map((radio, idx) => (\r\n                                <ToggleButton\r\n                                    className=\"toggle-vista\"\r\n                                    key={idx}\r\n                                    type=\"radio\"\r\n                                    variant=\"light\"\r\n                                    name=\"radio\"\r\n                                    value={radio.value}\r\n                                    checked={radioValue === radio.value}\r\n                                    onChange={(e) =>\r\n                                        setRadioValue(e.currentTarget.value)\r\n                                    }\r\n                                >\r\n                                    {radio.name}\r\n                                </ToggleButton>\r\n                            ))}\r\n                        </ButtonGroup>\r\n                    </Col>\r\n                    <Col className=\"mb-3\">\r\n                        <Select\r\n                            options={indOptions}\r\n                            placeholder={'Indicador'}\r\n                            onChange={(value) => {\r\n                                indicador.current = value;\r\n                            }}\r\n                            defaultValue={indicadores[0]}\r\n                        />\r\n                    </Col>\r\n                    <Col xs={12} sm={3} className=\"mb-3\">\r\n                        <Button\r\n                            className=\"btn-aplicar\"\r\n                            variant=\"primary\"\r\n                            block\r\n                            onClick={() => createQuery()}\r\n                        >\r\n                            Aplicar\r\n                        </Button>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n            <hr className=\"mt-2 mb-4\" />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RHFiltros;\r\n","import moment from 'moment';\r\nimport React, { useEffect } from 'react';\r\nimport { Form, Button, Row, Col } from 'react-bootstrap';\r\nimport Plot from 'react-plotly.js';\r\n\r\nfunction Grafica({ setDesde, setHasta, setDesdeHora, setHastaHora, data, layout, downloadFile, summary}) {\r\n    useEffect(() => {\r\n        setDesde(null);\r\n        setHasta(null);\r\n        setDesdeHora('00:00:00')\r\n        setHastaHora('00:00:00')\r\n    }, []);\r\n    return (\r\n        <div>\r\n            <Form className=\"mt-4 mb-4\">\r\n                <Form.Row className=\"d-flex justify-content-evenly\">\r\n                    <Col xs={12} lg={5} className=\"mb-3\">\r\n                        <Row>\r\n                            <Col xs={2}>\r\n                                <Form.Label className=\"col-form-label\">\r\n                                    Desde:{' '}\r\n                                </Form.Label>\r\n                            </Col>\r\n\r\n                            <Col xs={5}>\r\n                                <Form.Control\r\n                                    type=\"date\"\r\n                                    required\r\n                                    onChange={(event) => setDesde(moment(event.target.value))}\r\n                                ></Form.Control>\r\n                            </Col>\r\n\r\n                            <Col xs={5}>\r\n                                <Form.Control\r\n                                    onChange={(event) => setDesdeHora(event.target.value + ':00')}\r\n                                    type=\"time\"></Form.Control>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                    <Col xs={12} lg={5} className=\"mb-3\">\r\n                        <Row>\r\n                            <Col xs={2}>\r\n                                <Form.Label className=\"col-form-label\">\r\n                                    Hasta:{' '}\r\n                                </Form.Label>\r\n                            </Col>\r\n\r\n                            <Col xs={5}>\r\n                                <Form.Control\r\n                                    type=\"date\"\r\n                                    required\r\n                                    onChange={(event) =>\r\n                                        setHasta(moment(event.target.value))\r\n                                    }\r\n                                ></Form.Control>\r\n                            </Col>\r\n\r\n                            <Col xs={5}>\r\n                                <Form.Control\r\n                                    onChange={(event) => setHastaHora(event.target.value + ':00')}\r\n                                    type=\"time\"></Form.Control>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n\r\n            <Row className=\"mb-5\">\r\n                <Col xs={12} lg={4} xl={2}>\r\n                    <Row xs={12}>\r\n                        <Button className=\"btn btn-light mb-4\" block\r\n                                onClick = {() => {\r\n                                    downloadFile()\r\n                                }}>\r\n                            Descargar datos\r\n                        </Button>\r\n                    </Row>\r\n                    <Row className=\"d-flex justify-content-center\">\r\n                        <Col xs={6} sm={5} lg={12}>\r\n                            <Row className=\"dato-calculado d-flex justify-content-center\">\r\n                                <Row sm={12}>\r\n                                    <p className=\"tipo text-center\">Máximo</p>\r\n                                    <p className=\"desc text-center\">{summary && summary?.max.date ? `Registrado el ${summary?.max.date}` : ''}</p>\r\n                                </Row>\r\n                                <Row\r\n                                    sm={12}\r\n                                    className=\"d-flex align-items-center justify-content-end\"\r\n                                >\r\n                                    <p className=\"numero muymala text-center\">\r\n                                        {summary && typeof summary?.max.value === 'number'\r\n                                            ? summary.max.value.toFixed(2)\r\n                                            : '-'}\r\n                                    </p>\r\n                                </Row>\r\n                            </Row>\r\n                        </Col>\r\n                        <Col xs={6} sm={5} lg={12}>\r\n                            <Row className=\"dato-calculado d-flex justify-content-center\">\r\n                                <Row sm={12}>\r\n                                    <p className=\"tipo text-center\">Mínimo</p>\r\n                                    <p className=\"desc text-center\">{summary && summary?.min.date ? `Registrado el ${summary?.min.date}` : ''}</p>\r\n                                </Row>\r\n                                <Row\r\n                                    sm={12}\r\n                                    className=\"d-flex align-items-center justify-content-end\"\r\n                                >\r\n                                    <p className=\"numero acept text-center\">\r\n                                        {summary && typeof summary?.min.value === 'number'\r\n                                            ? summary.min.value.toFixed(2)\r\n                                            : '-'}\r\n                                    </p>\r\n                                </Row>\r\n                            </Row>\r\n                        </Col>\r\n                        <Col xs={6} sm={5} lg={12}>\r\n                            <Row className=\"dato-calculado d-flex align-items-center justify-content-center\">\r\n                                <Row sm={12}>\r\n                                    <p className=\"tipo text-center\">Promedio</p>\r\n                                </Row>\r\n                                <Row\r\n                                    sm={12}\r\n                                    className=\"d-flex align-items-center justify-content-end\"\r\n                                >\r\n                                    <p className=\"numero mala text-center\">\r\n                                        {summary && typeof summary?.avg.value === 'number'\r\n                                            ? summary.avg.value.toFixed(2)\r\n                                            : '-'}\r\n                                    </p>\r\n                                </Row>\r\n                            </Row>\r\n                        </Col>\r\n                        <Col xs={6} sm={5} lg={12}>\r\n                            <Row className=\"dato-calculado d-flex align-items-center justify-content-center\">\r\n                                <Row sm={12}\r\n                                    className=\"d-flex align-items-center justify-content-center\">\r\n                                    <p className=\"tipo text-center\">Arriba de la norma</p>\r\n                                </Row>\r\n                                <Row sm={12}\r\n                                    className=\"d-flex align-items-center justify-content-center\">\r\n                                    <p className={`numero text-center ${summary ? (summary.porcentajes.arribaLimite === 0 ? \"bueno\" : summary.porcentajes.arribaLimite > 25 ? \"muymala\" : \"mala\") : null}`}>{summary ? summary.porcentajes.arribaLimite + '%' : '-'}</p>\r\n                                </Row>\r\n                            </Row>\r\n                        </Col>\r\n                        <Col xs={12} sm={5} lg={12}>\r\n                            <Row className=\"dato-calculado\">\r\n                                <Col xs={6} sm={6}\r\n                                    className=\"d-flex flex-column align-items-center justify-content-center\">\r\n                                    <p className=\"tipo text-center\">Datos Válidos</p>\r\n                                    <p className=\"numero bueno text-center\">{summary ? summary.porcentajes.buenos + '%' : '-'}</p>\r\n                                </Col>\r\n                                <Col xs={6} sm={6}\r\n                                    className=\"d-flex flex-column align-items-center justify-content-center\">\r\n                                    <p className=\"tipo text-center\">Datos Nulos</p>\r\n                                    <p className=\"numero muymala text-center\">{summary ? summary.porcentajes.nulos + '%' : '-'}</p>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col sm={12} lg={8} xl={10}>\r\n                    <div className=\"grafico mb-4\">\r\n                        {data && (\r\n                            <Plot className=\"grafico-resize\" data={data} layout={layout} config={{ responsive: true }} />\r\n                        )}\r\n                        {typeof data == 'undefined' && (\r\n                            <div>Seleccionar un sensor, contaminante y fechas para ver sus datos</div>\r\n                        )}\r\n                    </div>\r\n                </Col>\r\n                <Row className=\"d-block d-sm-none w-100\" xs={11}>\r\n                    <p>*Para una mejor visualización, utiliza el telefono horizontalmente.</p>\r\n                </Row>\r\n            </Row>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Grafica;\r\n","import React, { useState, useEffect, useRef, Suspense, lazy } from \"react\";\r\nimport RHFiltros from \"./components/RHFiltros\";\r\nimport Grafica from \"./components/Grafica\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { apiUrl } from \"./constants\";\r\nimport { Modal } from \"react-bootstrap\";\r\n\r\nmoment.locale(\"es\");\r\n\r\nconst Calendario = lazy(() => import(\"./components/Calendario\")) \r\nconst HeatMap  = lazy(() => import(\"./components/HeatMap\"));\r\n\r\nfunction Registro() {\r\n  const [data, setData] = useState(null);\r\n  const [summaryData, setSummaryData] = useState(null);\r\n  const [radioValue, setRadioValue] = useState(\"1\"); // sección seleccionada (Gráfica/Calendario)\r\n  const [queryString, setQueryString] = useState(null); // string del query\r\n\r\n  const [loading, setLoading] = useState(false); // gif\r\n  const [noData, setNoData] = useState(false); // Desplegar mensaje si no se encontraron datos en la BD\r\n\r\n  // Datos de los filtros:\r\n  //const [indi, setIndi] = useState('PM25');\r\n  const [desde, setDesde] = useState(null);\r\n  const [hasta, setHasta] = useState(null);\r\n  const [desdeHora, setDesdeHora] = useState(\"00:00:00\");\r\n  const [hastaHora, setHastaHora] = useState(\"00:00:00\");\r\n  const ind = useRef({ value: \"PM25\" });\r\n  const ubicacion = useRef(null);\r\n  const syst = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (queryString) {\r\n      if (radioValue === \"1\") {\r\n        // Sección gráfica\r\n        fetch(`${apiUrl}/get-graph-opt?${queryString}`)\r\n          .then((response) => response.json())\r\n          .then((json) => {\r\n            if (json.hasOwnProperty(\"message\")) setNoData(true);\r\n            // Hacer cambio de horario por la zona horaria\r\n            let fechasArray = [];\r\n            if (json.plot.data) {\r\n              json.plot.data[0].x.forEach((fecha) => {\r\n                let time = moment.duration(\"05:00:00\");\r\n                fecha = moment(fecha).subtract(time).format();\r\n                fechasArray.push(fecha.split(\"-05:00\")[0]);\r\n              });\r\n            }\r\n            json.plot.data[0].x = fechasArray;\r\n\r\n            setData(json.plot);\r\n            setSummaryData(json.summary);\r\n            setLoading(false);\r\n          });\r\n      } else {\r\n        // Sección calendario\r\n        fetch(`${apiUrl}/datos-fecha?${queryString}`)\r\n          .then((response) => response.json())\r\n          .then((json) => setData(json));\r\n      }\r\n    }\r\n  }, [queryString]); // Cada que cambia el string del query creado, hacemos un request al api\r\n\r\n  useEffect(() => {\r\n    setData(null);\r\n  }, [radioValue]); // Cuando cambiamos entre Gráfica y Calendario, borramos los datos\r\n\r\n  // Esta función es llamada por un componente hijo para actualizar los valores cada que cambian en los filtros\r\n  function updateMainFiltros(u, i, s) {\r\n    syst.current = s;\r\n    ubicacion.current = u;\r\n    ind.current = i;\r\n  }\r\n\r\n  // Crea el string del query para la gráfica\r\n  function createQueryGraph() {\r\n    if (!ubicacion.current) {\r\n      alert(\"Selecciona una ubicación.\");\r\n      return;\r\n    }\r\n    if (!desde || !hasta) {\r\n      alert(\"Selecciona las fechas.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true); // Muestra gif de loading\r\n\r\n    let queryStr = `location=${ubicacion.current.label}&gas=${\r\n      ind.current.value\r\n    }&system=${syst.current.opt}&start_date=${moment\r\n      .utc(desde)\r\n      .format(\"MM/DD/YYYY\")}${\"/\"}${desdeHora}&end_date=${moment\r\n      .utc(hasta)\r\n      .format(\"MM/DD/YYYY\")}${\"/\"}${hastaHora}`;\r\n\r\n    setQueryString(queryStr);\r\n  }\r\n\r\n  // Crea el string del query para el calendario\r\n  function createQueryCal(initialDate, endingDate) {\r\n    // Ejemplo:\r\n    // http://127.0.0.1:8000/datos-fecha?ubic=PA39362&ind=PM25&inicio=2020-10-05&fin=2020-10-06\r\n\r\n    if (!ubicacion.current) {\r\n      alert(\"Selecciona una ubicación.\");\r\n      return;\r\n    }\r\n\r\n    if (!initialDate || !endingDate) {\r\n      initialDate = desde;\r\n      endingDate = hasta;\r\n    }\r\n\r\n    let queryStr = \"ubic=\";\r\n    queryStr += ubicacion.current.value;\r\n\r\n    queryStr +=\r\n      \"&ind=\" +\r\n      ind.current.value +\r\n      \"&inicio=\" +\r\n      initialDate.format(\"YYYY-MM-DD\") +\r\n      \"&fin=\" +\r\n      endingDate.format(\"YYYY-MM-DD\");\r\n\r\n    setQueryString(queryStr);\r\n  }\r\n\r\n  function getQueryStringToDownload() {\r\n    if (queryString) {\r\n      let queryStr = \"location=\";\r\n\r\n      queryStr += ubicacion.current.value;\r\n      if (radioValue === \"2\") {\r\n        // Para el calendario se descarga todo el mes\r\n        queryStr +=\r\n          \"&gas=\" +\r\n          ind.current.value +\r\n          \"&start_date=\" +\r\n          desde.startOf(\"month\").format(\"YYYY-MM-DD\") +\r\n          \"&end_date=\" +\r\n          hasta.endOf(\"month\").format(\"YYYY-MM-DD\");\r\n      } else {\r\n        // Para la sección de la gráfica se descarga según las fechas seleccionadas\r\n        queryStr +=\r\n          \"&gas=\" +\r\n          ind.current.value +\r\n          \"&start_date=\" +\r\n          desde.format(\"YYYY-MM-DD\") +\r\n          \"&end_date=\" +\r\n          hasta.format(\"YYYY-MM-DD\");\r\n      }\r\n\r\n      return queryStr;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function downloadFile() {\r\n    let queryStr = getQueryStringToDownload();\r\n\r\n    if (queryStr) {\r\n      fetch(`${apiUrl}/download-data?${queryStr}`)\r\n        .then((response) => response.blob())\r\n        .then((blob) => {\r\n          const url = URL.createObjectURL(blob);\r\n\r\n          const a = document.createElement(\"a\");\r\n          a.href = url;\r\n          a.download = \"data.csv\";\r\n\r\n          const clickHandler = () => {\r\n            setTimeout(() => {\r\n              URL.revokeObjectURL(url);\r\n              a.removeEventListener(\"click\", clickHandler);\r\n            }, 150);\r\n          };\r\n\r\n          a.addEventListener(\"click\", clickHandler, false);\r\n          a.click();\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mb-10\">\r\n      {/* Sería bueno refactorear esto a un componente */}\r\n      <Modal\r\n        show={noData}\r\n        onHide={() => setNoData(false)}\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <h5>Datos no encontrados</h5>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Revise los parametros e intente de nuevo.</p>\r\n        </Modal.Body>\r\n      </Modal>\r\n      <RHFiltros\r\n        createQueryGraph={createQueryGraph}\r\n        createQueryCal={createQueryCal}\r\n        radioValue={radioValue}\r\n        setRadioValue={setRadioValue}\r\n        updateMainFiltros={updateMainFiltros}\r\n      />\r\n      <div className=\"text-center\">\r\n        <img\r\n          src=\"loading.gif\"\r\n          alt=\"Cargando...\"\r\n          className=\"loading\"\r\n          style={loading ? {} : { display: \"none\" }}\r\n        />\r\n      </div>\r\n      {radioValue === \"1\" && (\r\n        <Grafica\r\n          setDesde={setDesde}\r\n          setHasta={setHasta}\r\n          setDesdeHora={setDesdeHora}\r\n          setHastaHora={setHastaHora}\r\n          downloadFile={downloadFile}\r\n          summary={summaryData}\r\n          {...data}\r\n        />\r\n      )}\r\n      {radioValue === \"2\" && (\r\n        <>\r\n          <Suspense fallback={<div>Loading...</div>}>\r\n            <Calendario\r\n              q={queryString}\r\n              create={createQueryCal}\r\n              data={data}\r\n              indi={ind.current.value}\r\n              setDesde={setDesde}\r\n              setHasta={setHasta}\r\n              downloadFile={downloadFile}\r\n            />\r\n            <HeatMap\r\n              q={queryString}\r\n              fecha={desde}\r\n              ubic={ubicacion.current}\r\n              ind={ind.current.value}\r\n            />\r\n          </Suspense>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Registro;\r\n","import React, {useRef, useMemo, useState, useEffect} from 'react'\r\nimport { Form, Col, Row } from 'react-bootstrap'\r\nimport Select from 'react-select';\r\nimport { systemOptions, indicadores, idBlacklistpriv } from '../constants';\r\n\r\n// Componente para la página de Compara Datos\r\nconst ComparaFiltros = (props) => {\r\n    const id = useRef(props.id); // ID para el componente, pues se pueden agregar varios\r\n    let sensores = props.sensores; // Opciones del dropdown de sensores\r\n    \r\n    // Datos de cada input:\r\n    const [system, setSystem] = useState(\"PurpleAir\");\r\n    const [indOptions, setIndOptions] = useState(indicadores)\r\n    const [location, setLocation] = useState(null)\r\n    const ubic = useRef(sensores[0].zona ? sensores[0].zona : null);\r\n    const ind = useRef(indicadores[0].value);\r\n    const desde = useRef(null);\r\n    const hasta = useRef(null);\r\n    const desdeHora = useRef('00:00:00');\r\n    const hastaHora = useRef('00:00:00');\r\n\r\n    useEffect(() => {\r\n        system === \"PurpleAir\" ? setIndOptions([indicadores[0]]) : setIndOptions(indicadores)\r\n    }, [system]);\r\n\r\n    const sensorOptions = useMemo(() => {\r\n        return sensores\r\n            .filter(\r\n                (sensor) =>\r\n                    sensor.sistema === system &&\r\n                    !idBlacklistpriv.includes(sensor.Sistema)\r\n            )\r\n            .map((record) => ({\r\n                value: record.sensor_id,\r\n                label: record.zona,\r\n            }));\r\n    }, [sensores, system]);\r\n\r\n    // Cada que cambie uno de los inputs, se mandan al componente padre porque allá se crea el query\r\n    function updateData() {\r\n        let formData = {\r\n            ubic: ubic.current,\r\n            ind: ind.current,\r\n            desde: desde.current,\r\n            hasta: hasta.current,\r\n            desdeHora: desdeHora.current,\r\n            hastaHora: hastaHora.current\r\n        }\r\n        props.modifyData(formData, id.current);\r\n    }\r\n    \r\n    return (\r\n        <Col sm={6}>\r\n            <div className=\"compara-filtros mt-2 mb-4\" id={\"filtro-\" + id.current}>\r\n                <Form>\r\n                    <Form.Group as={Row}>\r\n                        <Col sm={12}>\r\n                            <Row>\r\n                                <Col sm={6}>\r\n                                    <Select \r\n                                    options={systemOptions} \r\n                                    placeholder={'Sistema'}\r\n                                    className=\"mb-2\"\r\n                                    onChange={(value) => {\r\n                                        setSystem(value.value)\r\n                                        setLocation(null)\r\n                                        ubic.current = null\r\n                                        updateData()\r\n                                    }}\r\n                                    />\r\n                                    <Select \r\n                                    options={sensorOptions} \r\n                                    value={location}\r\n                                    placeholder={'Ubicación'}\r\n                                    className=\"mb-2\"\r\n                                    onChange={(value) => {\r\n                                        setLocation(value)\r\n                                        ubic.current = value;\r\n                                        updateData()}}\r\n                                    />\r\n                                </Col>\r\n                                <Col sm={6}>\r\n                                    <Select \r\n                                    options={indOptions} \r\n                                    defaultValue={indicadores[0]}\r\n                                    onChange={(value) => {\r\n                                        ind.current = value.value;\r\n                                        updateData()}}\r\n                                />\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Form.Group as={Row}>\r\n                        <Col sm={12}>\r\n                            <Row>\r\n                                <Col sm={6}>\r\n                                    <Row>\r\n                                        <Col sm={3}>\r\n                                            <p>Desde:</p>\r\n                                        </Col>\r\n                                        <Col sm={9}>\r\n                                        <Form.Control \r\n                                        className=\"cf-input\" \r\n                                        type=\"date\" \r\n                                        onChange={(event) => {\r\n                                            desde.current = event.target.value;\r\n                                            updateData()}}>\r\n                                        </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col sm={3}></Col>\r\n                                        <Col sm={9}>\r\n                                            <Form.Control \r\n                                            onChange={(event) => {\r\n                                                desdeHora.current = event.target.value + ':00';\r\n                                                updateData()\r\n                                            }}\r\n                                            type=\"time\">\r\n                                            </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                                <Col sm={6}>\r\n                                    <Row>\r\n                                        <Col sm={3}>\r\n                                            <p>Hasta:</p>\r\n                                        </Col>\r\n                                        <Col sm={9}>\r\n                                        <Form.Control \r\n                                        className=\"cf-input\" \r\n                                        type=\"date\" \r\n                                        onChange={(event) => {\r\n                                            hasta.current = event.target.value;\r\n                                            updateData()}}>\r\n                                        </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col sm={3}></Col>\r\n                                        <Col sm={9}>\r\n                                            <Form.Control\r\n                                            onChange={(event) => {\r\n                                                hastaHora.current = event.target.value + ':00';\r\n                                                updateData()\r\n                                            }}                                            \r\n                                            type=\"time\"></Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Form>\r\n            </div>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport default ComparaFiltros\r\n","import React, {useRef,  useEffect, useState} from 'react'\r\nimport ComparaFiltros from './components/ComparaFiltros'\r\nimport { Col, Row, Button } from 'react-bootstrap'\r\nimport { fetchSummaryData } from './handlers/data';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setSensorData } from './redux/reducers';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { apiUrl } from './constants';\r\nimport Plot from 'react-plotly.js';\r\n\r\nfunction Compara() {\r\n\r\n    const dispatch = useDispatch();\r\n    const { sensorDataLastUpdate, sensorData } = useSelector((state) => state);\r\n    const [sensRaw, setSensRaw] = useState(null);\r\n    let sensores = [];\r\n\r\n    useEffect(() => {\r\n        const diff = sensorDataLastUpdate\r\n            ? moment().diff(sensorDataLastUpdate, 'minutes')\r\n            : 999;\r\n\r\n        if (diff > 60) {\r\n            fetchSummaryData()\r\n                .then((data) => {\r\n                    dispatch(setSensorData(data));\r\n                    setSensRaw(data);\r\n                })\r\n                .catch((err) => console.error(err));\r\n        } else {\r\n            setSensRaw(sensorData);\r\n        }\r\n    }, []);\r\n\r\n    // Crear valores para mandar al componente ComparaFiltros:\r\n    if (sensRaw) {\r\n        sensRaw.forEach(element => {\r\n            sensores.push({sensor_id: element.Sensor_id, zona: element.Zona, sistema: element.Sistema});\r\n        });\r\n    }\r\n\r\n    const maxNum = 3;\r\n    const numFiltros = useRef(-1);\r\n    const [filters, setFilters] = useState([]);\r\n    const filterData = useRef([]);\r\n\r\n    const [data, setData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    // Esta función es llamada por los cada componente hijo (CompraFiltros) cuando se modifican los valores seleccionados\r\n    // Todos los valores de los filtros se guardan en un solo arreglo \r\n    function modifyData(data, index) {\r\n        filterData.current[index] = data;\r\n    }\r\n\r\n    function addFiltro() {\r\n        if (numFiltros.current < maxNum) {\r\n            numFiltros.current = numFiltros.current + 1;\r\n            setFilters([...filters, <ComparaFiltros id={numFiltros.current} modifyData={modifyData} sensores={sensores}/>]);\r\n        }\r\n    }\r\n\r\n    // Elimina el último filtro\r\n    function deleteFiltro() {\r\n        if (numFiltros.current != -1) {\r\n            let filtroDiv = document.getElementById(`filtro-${numFiltros.current}`).parentNode;\r\n            filtroDiv.parentNode.removeChild(filtroDiv);\r\n            numFiltros.current = numFiltros.current - 1;\r\n        }\r\n    }\r\n\r\n    function queryData() {\r\n        if (numFiltros.current < 0) {\r\n            return;\r\n        }\r\n        let ubicaciones = \"\";\r\n        let gases = \"\";\r\n        let fechas_inicio = \"\";\r\n        let fechas_fin = \"\";\r\n\r\n        for (let i=0; i<=numFiltros.current ; i++) {\r\n            if (!filterData.current[i]|| !filterData.current[i][\"desde\"] || !filterData.current[i][\"hasta\"]) { // A alguno le falta seleccionar fechas\r\n                alert(\"Selecciona las fechas\");\r\n                return;\r\n            } else {\r\n                // Unir con comas\r\n                ubicaciones += filterData.current[i][\"ubic\"].label + \",\";\r\n                gases += filterData.current[i][\"ind\"] + \",\";\r\n                fechas_inicio += filterData.current[i][\"desde\"] + \"/\" + filterData.current[i][\"desdeHora\"] + \",\";\r\n                fechas_fin += filterData.current[i][\"hasta\"] + \"/\" + filterData.current[i][\"hastaHora\"] + \",\";\r\n            }\r\n        }\r\n\r\n        // Quitar última coma\r\n        ubicaciones = ubicaciones.slice(0, -1);\r\n        gases = gases.slice(0, -1);\r\n        fechas_inicio = fechas_inicio.slice(0, -1);\r\n        fechas_fin = fechas_fin.slice(0, -1);\r\n\r\n        let query = `ubic=${ubicaciones}&ind=${gases}&inicio=${fechas_inicio}&fin=${fechas_fin}`;\r\n\r\n        setLoading(true); // Muestra gif de loading\r\n\r\n        fetch(`${apiUrl}/compare?${query}`)\r\n            .then((response) => response.json())\r\n            .then((json) => {\r\n                setLoading(false);\r\n                setData(json)\r\n            });\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        createGraph();\r\n    }, [data])\r\n\r\n    const [limiteOMS, setLimiteOMS] = useState(null);\r\n\r\n    let graphLayout = {\r\n        title: {\r\n            text: 'Compara datos',\r\n        },\r\n        showlegend: true,\r\n        hovermode: 'closest',\r\n        width: 1000,\r\n        height: 700\r\n    };\r\n\r\n    let getAnnotations = () => [\r\n        {\r\n            xref: 'paper',\r\n            x: 1.01,\r\n            y: (limiteOMS),\r\n            xanchor: 'left',\r\n            yanchor: 'middle',\r\n            text: 'Límite recomendado <br>por la OMS 24h',\r\n            showarrow: false,\r\n            font: {\r\n                family: 'Arial',\r\n                size: 12,\r\n                color: 'white'\r\n            },\r\n            bgcolor: '#4682b4',\r\n        }\r\n    ];\r\n\r\n    let getShapes = () => {\r\n        let min1, max1, min2, max2, min3, max3, min4, max4, min5, max5;\r\n\r\n        switch(gas) {\r\n            case 'PM2.5':\r\n                min1 = 0;\r\n                max1 = 25;\r\n                min2 = 25;\r\n                max2 = 45;\r\n                min3 = 45;\r\n                max3 = 79;\r\n                min4 = 79;\r\n                max4 = 147;\r\n                min5 = 147;\r\n                max5 = 172;\r\n                break;\r\n            case 'PM10':\r\n                min1 = 0;\r\n                max1 = 50;\r\n                min2 = 50;\r\n                max2 = 75;\r\n                min3 = 75;\r\n                max3 = 155;\r\n                min4 = 155;\r\n                max4 = 235;\r\n                min5 = 235;\r\n                max5 = 255;\r\n                break;\r\n            case 'O3':\r\n                min1 = 0;\r\n                max1 = 0.051;\r\n                min2 = 0.051;\r\n                max2 = 0.070;\r\n                min3 = 0.070;\r\n                max3 = 0.092;\r\n                min4 = 0.092;\r\n                max4 = 0.114;\r\n                min5 = 0.114;\r\n                max5 = 0.139;\r\n                break;\r\n            case 'CO':\r\n                min1 = 0;\r\n                max1 = 8.75;\r\n                min2 = 8.75;\r\n                max2 = 11;\r\n                min3 = 11;\r\n                max3 = 13.3;\r\n                min4 = 13.3;\r\n                max4 = 15.5;\r\n                min5 = 15.5;\r\n                max5 = 17.5;\r\n                break;\r\n            case 'NO2':\r\n                min1 = 0;\r\n                max1 = 0.107;\r\n                min2 = 0.107;\r\n                max2 = 0.210;\r\n                min3 = 0.210;\r\n                max3 = 0.230;\r\n                min4 = 0.230;\r\n                max4 = 0.250;\r\n                min5 = 0.250;\r\n                max5 = 0.275;\r\n                break;\r\n            case 'SO2':\r\n                min1 = 0;\r\n                max1 = 0.008;\r\n                min2 = 0.008;\r\n                max2 = 0.110;\r\n                min3 = 0.110;\r\n                max3 = 0.165;\r\n                min4 = 0.165;\r\n                max4 = 0.220;\r\n                min5 = 0.220;\r\n                max5 = 0.255;\r\n                break;\r\n            default:\r\n                min1 = 0;\r\n                max1 = 25;\r\n                min2 = 25;\r\n                max2 = 45;\r\n                min3 = 45;\r\n                max3 = 79;\r\n                min4 = 79;\r\n                max4 = 147;\r\n                min5 = 147;\r\n                max5 = 172;\r\n                break;\r\n        }\r\n\r\n        let shapes = [\r\n            // Nivel 1\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min1,\r\n                x1: 1,\r\n                y1: max1,\r\n                fillcolor: 'rgb(0, 228, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 2\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min2,\r\n                x1: 1,\r\n                y1: max2,\r\n                fillcolor: 'rgb(255, 255, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 3\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min3,\r\n                x1: 1,\r\n                y1: max3,\r\n                fillcolor: 'rgb(255, 126, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 4\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min4,\r\n                x1: 1,\r\n                y1: max4,\r\n                fillcolor: 'rgb(255, 0, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 5\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min5,\r\n                x1: 1,\r\n                y1: max5,\r\n                fillcolor: 'rgb(143, 63, 151)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            },\r\n            {\r\n                type: 'line',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: limiteOMS,\r\n                x1: 1,\r\n                y1: limiteOMS,\r\n                line:{\r\n                    color: '#4682b4',\r\n                    width: 2,\r\n                    dash:'dash'\r\n                }\r\n            } \r\n        ];\r\n        \r\n        return shapes\r\n    }\r\n\r\n\r\n    const [graphData, setGraphData] = useState([]);\r\n    const [gas, setGas] = useState(null);\r\n\r\n    let colors = ['red', 'green', 'blue', 'orange']; // Opciones de color de las líneas\r\n    let colors2 = ['purple', 'pink', 'black', 'cyan']; // Opciones de color de las líneas\r\n    let colors3 = ['orange', 'brown', 'grey', 'maroon']; // Opciones de color de las líneas\r\n\r\n    function createGraph() {\r\n        let graph = [];\r\n        if (data) {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let ubicacion = sensores.find(sensor => sensor.sensor_id === filterData.current[i][\"ubic\"].value).zona;\r\n                let gas = filterData.current[i][\"ind\"] === \"PM25\" ? \"PM2.5\" : filterData.current[i][\"ind\"];\r\n                setGas(gas);\r\n\r\n                switch(gas) {\r\n                    case 'PM2.5':\r\n                        setLimiteOMS(15);\r\n                        break;\r\n                    case 'PM10':\r\n                        setLimiteOMS(45);\r\n                        break;\r\n                    case 'O3':\r\n                        setLimiteOMS(0.051);\r\n                        break;\r\n                    case 'NO2':\r\n                        setLimiteOMS(0.013);\r\n                        break;\r\n                    case 'SO2':\r\n                        setLimiteOMS(0.015);\r\n                        break;\r\n                    default:\r\n                        setLimiteOMS(null);\r\n                        break;\r\n                }\r\n\r\n                data[i].name = `${ubicacion} (${gas})`; \r\n                data[i].type = \"scatter\";\r\n                data[i].mode = \"lines\";\r\n                data[i].marker = { color: colors[i] };\r\n                \r\n                data[i].text = data[i].dia.map(function(d) { return moment.utc(new Date(d)).format('DD-MM-YYYY HH:mm:ss') } );\r\n\r\n                data[i].hovertemplate = '<i>Medida</i>: %{y:.4f}' +'<br><b>%{text}</b>'; // Tooltip\r\n\r\n                graph.push(data[i]);\r\n\r\n                if(gas === 'PM2.5' || gas === 'PM10') {\r\n                    // Agregar promedio movil 24h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 24h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                    \r\n                    // Agregar Indice aire y salud\r\n                    const dataICAR = { ...data[i] }\r\n                    dataICAR.name = `${ubicacion} (${gas}) Indice Aire y Salud`\r\n                    dataICAR.marker = { color: colors3[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataICAR.y = dataICAR.ICAR;\r\n                    graph.push(dataICAR)\r\n\r\n                } else if (gas === 'SO2') {\r\n                    // Agregar promedio movil 24h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 24h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                    \r\n                } else if (gas === 'CO') {\r\n                    // Agregar promedio movil 8h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 8h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<7;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                }\r\n            }\r\n\r\n            setGraphData(graph);\r\n        }\r\n\r\n    }\r\n    \r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <div className=\"ta-center mb-5\">\r\n                <h2>Compara datos</h2>\r\n                <p>Compara la calidad del aire en diferente lugar y tiempo</p>\r\n            </div>\r\n            <hr className=\"mb-4\"/>\r\n            <Row className=\"mt-2 mb-1 d-flex justify-content-center\" id=\"filtros\">\r\n                {filters}\r\n            </Row>\r\n            <Row className=\"d-flex justify-content-end\">\r\n                <Col sm={6} className=\"d-flex justify-content-between\">\r\n                    <Button onClick={() => addFiltro()}>Agregar un filtro</Button>\r\n                    <Button onClick={() => deleteFiltro()}>Eliminar un filtro</Button>\r\n                    <Button onClick={() => queryData()}>Generar gráfica</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n            <Col sm={12}>\r\n                <div className=\"text-center\">\r\n                    <img\r\n                        src=\"loading.gif\"\r\n                        alt=\"Cargando...\"\r\n                        className=\"loading\"\r\n                        style={loading ? {} : { display: 'none' }}\r\n                    />\r\n                </div>\r\n                <div class=\"grafico-compara mt-5\">\r\n                    <Plot\r\n                        data={graphData}\r\n                        layout={ data ? {...graphLayout, shapes: getShapes(), annotations: getAnnotations()} : {...graphLayout}}\r\n                    />\r\n                </div>\r\n            </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Compara\r\n","import { lazy, Suspense } from \"react\";\r\nimport \"./App.css\";\r\nimport { Route, Switch, BrowserRouter } from \"react-router-dom\";\r\nimport Header from \"./components/Header.js\";\r\nimport Footer from \"./components/Footer.js\";\r\n\r\nimport Mapa from \"./Mapa\";\r\nimport Registro from \"./Registro\";\r\nimport Compara from \"./Compara\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Mapa} />\r\n          <Route exact path=\"/registro\" component={Registro} />\r\n          <Route exact path=\"/compara\" component={Compara} />\r\n        </Switch>\r\n        <Footer />\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { createStore } from 'redux';\r\nimport { persistStore, persistReducer } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst persistedReducer = persistReducer(\r\n    {\r\n        key: 'root',\r\n        storage,\r\n    },\r\n    rootReducer\r\n);\r\n\r\n// const config = \r\n\r\nexport default () => {\r\n    let store = createStore(persistedReducer);\r\n    let persistor = persistStore(store);\r\n    return { store, persistor };\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport reduxConfig from './redux/config';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nconst { store, persistor } = reduxConfig();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <PersistGate loading={null} persistor={persistor}>\r\n            <BrowserRouter>\r\n                <App />\r\n            </BrowserRouter>\r\n        </PersistGate>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","export const criteria = {\r\n    'Aire y Salud': {\r\n        PM10: [50, 75, 155, 235],\r\n        PM25: [25, 45, 78, 147],\r\n        O3: [0.051, 0.095, 0.135, 0.175],\r\n        CO: [8.75, 11.00, 13.30, 15.50],\r\n        SO2: [0.008, 0.110, 0.165, 0.220],\r\n        NO2: [0.107, 0.210, 0.230, 0.250],\r\n    },\r\n    NOM: {\r\n        PM10: [100, 135, 214, 300],\r\n        PM25: [55, 75, 97.4, 128.8],\r\n        O3: [0.07, 0.093, 0.115, 0.137],\r\n        CO: [12, 13.9, 15.9, 18.9],\r\n        SO2: [0.253, 0.345, 0.435, 0.566],\r\n        NO2: [0.132, 0.176, 0.221, 0.289],\r\n    },\r\n};\r\n\r\nexport const airQualityTags = [\"buena\", \"acept\", \"mala\", \"muy\", \"ext\"];\r\n\r\nexport const getStatus = (gas, value, norm = 'Aire y Salud') => {\r\n    const breakpoints = criteria[norm][gas];\r\n\r\n    for (let i = breakpoints.length - 1; i >= 0; i--) {\r\n        if (value > breakpoints[i]) {\r\n            return parseInt(i) + 1;\r\n        }\r\n    }\r\n\r\n    return 0;\r\n};\r\n","export const gases = [\r\n    {\r\n        name: 'PM25',\r\n        label: 'PM2.5',\r\n        units: 'μg/m3',\r\n    },\r\n    {\r\n        name: 'PM10',\r\n        units: 'μg/m3',\r\n    },\r\n    {\r\n        name: 'O3',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'CO',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'NO2',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'SO2',\r\n        units: 'ppm',\r\n    },\r\n];\r\n\r\n// Opciones del dropdown de sistemas:\r\nexport const systemOptions = [\r\n    {value: \"PurpleAir\", label: 'PurpleAir', opt: 'P'},\r\n    {value: \"Sinaica\", label: 'Sinaica', opt: 'G'},\r\n    {value: \"AireNuevoLeon\", label: 'AireNuevoLeon', opt: 'G'}\r\n]\r\n\r\n// Opciones del dropdown de gases:\r\nexport const indicadores = [\r\n    { value: 'PM25', label: 'PM2.5' },\r\n    { value: 'PM10', label: 'PM10' },\r\n    { value: 'O3', label: 'O3' },\r\n    { value: 'CO', label: 'CO' },\r\n    { value: 'NO2', label: 'NO2' },\r\n    { value: 'SO2', label: 'SO2' },\r\n];\r\n\r\nexport const unidad = {\r\n    PM25: 'µg/m3',\r\n    PM10: 'µg/m3',\r\n    CO: 'ppm',\r\n    O3: 'ppm',\r\n    NO2: 'ppm',\r\n    SO2: 'ppm',\r\n};\r\nexport const idBlacklist = [\r\n    'P36757',\r\n    'P47305',\r\n    'P39499',\r\n    'P46239',\r\n    'P50855',\r\n    'P35099',\r\n    'P39709',\r\n    'P39497',\r\n    'P39285',\r\n    'P39355',\r\n\r\n\r\n\r\n];\r\nexport const idBlacklistpriv = [\r\n    'P39497',\r\n    'P39285',\r\n    'P39355'\r\n\r\n];\r\nexport const mapBlacklist = [\r\n    'Sinaica', \r\n\r\n];\r\n\r\nexport const apiUrl =\r\n    process.env.NODE_ENV === 'production'\r\n        ? process.env.REACT_APP_API_URL\r\n        : 'http://127.0.0.1:8000';\r\n"],"sourceRoot":""}