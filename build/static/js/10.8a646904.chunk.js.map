{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/ComparaFiltros.js","Compara.js","constants.js","handlers/data.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","ComparaFiltros","props","id","useRef","sensores","useState","system","setSystem","indicadores","indOptions","setIndOptions","location","setLocation","ubic","zona","ind","value","desde","hasta","desdeHora","hastaHora","useEffect","sensorOptions","useMemo","filter","sensor","sistema","idBlacklistpriv","includes","Sistema","map","record","sensor_id","label","updateData","formData","current","modifyData","Col","sm","className","Form","Group","as","Row","options","systemOptions","placeholder","onChange","defaultValue","Control","type","event","target","Compara","dispatch","useDispatch","useSelector","state","sensorDataLastUpdate","sensorData","sensRaw","setSensRaw","moment","diff","fetchSummaryData","then","data","setSensorData","catch","err","console","error","forEach","element","push","Sensor_id","Zona","numFiltros","filters","setFilters","filterData","setData","loading","setLoading","index","graph","i","ubicacion","find","gas","setGas","setLimiteOMS","name","mode","marker","color","colors","text","dia","d","utc","Date","format","hovertemplate","dataPromMovil","colors2","y","moving_average","dataICAR","colors3","ICAR","length","setGraphData","createGraph","limiteOMS","graphLayout","title","showlegend","hovermode","width","height","graphData","Button","onClick","filtroDiv","document","getElementById","parentNode","removeChild","deleteFiltro","ubicaciones","gases","fechas_inicio","fechas_fin","alert","slice","query","fetch","apiUrl","response","json","queryData","src","alt","style","display","class","layout","shapes","min1","max1","min2","max2","min3","max3","min4","max4","min5","max5","xref","x0","y0","x1","y1","fillcolor","opacity","line","dash","getShapes","annotations","x","xanchor","yanchor","showarrow","font","family","size","bgcolor","units","opt","unidad","PM25","PM10","CO","O3","NO2","SO2","idBlacklist","mapBlacklist","process","REACT_APP_API_URL","retry","fn","ms","retries","Promise","resolve","reject","setTimeout","fetchSummaryDataFn","res","status"],"mappings":"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","file":"static/js/10.8a646904.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, {useRef, useMemo, useState, useEffect} from 'react'\r\nimport { Form, Col, Row } from 'react-bootstrap'\r\nimport Select from 'react-select';\r\nimport { systemOptions, indicadores, idBlacklistpriv } from '../constants';\r\n\r\n// Componente para la página de Compara Datos\r\nconst ComparaFiltros = (props) => {\r\n    const id = useRef(props.id); // ID para el componente, pues se pueden agregar varios\r\n    let sensores = props.sensores; // Opciones del dropdown de sensores\r\n    \r\n    // Datos de cada input:\r\n    const [system, setSystem] = useState(\"PurpleAir\");\r\n    const [indOptions, setIndOptions] = useState(indicadores)\r\n    const [location, setLocation] = useState(null)\r\n    const ubic = useRef(sensores[0].zona ? sensores[0].zona : null);\r\n    const ind = useRef(indicadores[0].value);\r\n    const desde = useRef(null);\r\n    const hasta = useRef(null);\r\n    const desdeHora = useRef('00:00:00');\r\n    const hastaHora = useRef('00:00:00');\r\n\r\n    useEffect(() => {\r\n        system === \"PurpleAir\" ? setIndOptions([indicadores[0]]) : setIndOptions(indicadores)\r\n    }, [system]);\r\n\r\n    const sensorOptions = useMemo(() => {\r\n        return sensores\r\n            .filter(\r\n                (sensor) =>\r\n                    sensor.sistema === system &&\r\n                    !idBlacklistpriv.includes(sensor.Sistema)\r\n            )\r\n            .map((record) => ({\r\n                value: record.sensor_id,\r\n                label: record.zona,\r\n            }));\r\n    }, [sensores, system]);\r\n\r\n    // Cada que cambie uno de los inputs, se mandan al componente padre porque allá se crea el query\r\n    function updateData() {\r\n        let formData = {\r\n            ubic: ubic.current,\r\n            ind: ind.current,\r\n            desde: desde.current,\r\n            hasta: hasta.current,\r\n            desdeHora: desdeHora.current,\r\n            hastaHora: hastaHora.current\r\n        }\r\n        props.modifyData(formData, id.current);\r\n    }\r\n    \r\n    return (\r\n        <Col sm={6}>\r\n            <div className=\"compara-filtros mt-2 mb-4\" id={\"filtro-\" + id.current}>\r\n                <Form>\r\n                    <Form.Group as={Row}>\r\n                        <Col sm={12}>\r\n                            <Row>\r\n                                <Col sm={6}>\r\n                                    <Select \r\n                                    options={systemOptions} \r\n                                    placeholder={'Sistema'}\r\n                                    className=\"mb-2\"\r\n                                    onChange={(value) => {\r\n                                        setSystem(value.value)\r\n                                        setLocation(null)\r\n                                        ubic.current = null\r\n                                        updateData()\r\n                                    }}\r\n                                    />\r\n                                    <Select \r\n                                    options={sensorOptions} \r\n                                    value={location}\r\n                                    placeholder={'Ubicación'}\r\n                                    className=\"mb-2\"\r\n                                    onChange={(value) => {\r\n                                        setLocation(value)\r\n                                        ubic.current = value;\r\n                                        updateData()}}\r\n                                    />\r\n                                </Col>\r\n                                <Col sm={6}>\r\n                                    <Select \r\n                                    options={indOptions} \r\n                                    defaultValue={indicadores[0]}\r\n                                    onChange={(value) => {\r\n                                        ind.current = value.value;\r\n                                        updateData()}}\r\n                                />\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Form.Group as={Row}>\r\n                        <Col sm={12}>\r\n                            <Row>\r\n                                <Col sm={6}>\r\n                                    <Row>\r\n                                        <Col sm={3}>\r\n                                            <p>Desde:</p>\r\n                                        </Col>\r\n                                        <Col sm={9}>\r\n                                        <Form.Control \r\n                                        className=\"cf-input\" \r\n                                        type=\"date\" \r\n                                        onChange={(event) => {\r\n                                            desde.current = event.target.value;\r\n                                            updateData()}}>\r\n                                        </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col sm={3}></Col>\r\n                                        <Col sm={9}>\r\n                                            <Form.Control \r\n                                            onChange={(event) => {\r\n                                                desdeHora.current = event.target.value + ':00';\r\n                                                updateData()\r\n                                            }}\r\n                                            type=\"time\">\r\n                                            </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                                <Col sm={6}>\r\n                                    <Row>\r\n                                        <Col sm={3}>\r\n                                            <p>Hasta:</p>\r\n                                        </Col>\r\n                                        <Col sm={9}>\r\n                                        <Form.Control \r\n                                        className=\"cf-input\" \r\n                                        type=\"date\" \r\n                                        onChange={(event) => {\r\n                                            hasta.current = event.target.value;\r\n                                            updateData()}}>\r\n                                        </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col sm={3}></Col>\r\n                                        <Col sm={9}>\r\n                                            <Form.Control\r\n                                            onChange={(event) => {\r\n                                                hastaHora.current = event.target.value + ':00';\r\n                                                updateData()\r\n                                            }}                                            \r\n                                            type=\"time\"></Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Form>\r\n            </div>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport default ComparaFiltros\r\n","import React, {useRef,  useEffect, useState} from 'react'\r\nimport ComparaFiltros from './components/ComparaFiltros'\r\nimport { Col, Row, Button } from 'react-bootstrap'\r\nimport { fetchSummaryData } from './handlers/data';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setSensorData } from './redux/reducers';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { apiUrl } from './constants';\r\nimport Plot from 'react-plotly.js';\r\n\r\nfunction Compara() {\r\n\r\n    const dispatch = useDispatch();\r\n    const { sensorDataLastUpdate, sensorData } = useSelector((state) => state);\r\n    const [sensRaw, setSensRaw] = useState(null);\r\n    let sensores = [];\r\n\r\n    useEffect(() => {\r\n        const diff = sensorDataLastUpdate\r\n            ? moment().diff(sensorDataLastUpdate, 'minutes')\r\n            : 999;\r\n\r\n        if (diff > 60) {\r\n            fetchSummaryData()\r\n                .then((data) => {\r\n                    dispatch(setSensorData(data));\r\n                    setSensRaw(data);\r\n                })\r\n                .catch((err) => console.error(err));\r\n        } else {\r\n            setSensRaw(sensorData);\r\n        }\r\n    }, []);\r\n\r\n    // Crear valores para mandar al componente ComparaFiltros:\r\n    if (sensRaw) {\r\n        sensRaw.forEach(element => {\r\n            sensores.push({sensor_id: element.Sensor_id, zona: element.Zona, sistema: element.Sistema});\r\n        });\r\n    }\r\n\r\n    const maxNum = 3;\r\n    const numFiltros = useRef(-1);\r\n    const [filters, setFilters] = useState([]);\r\n    const filterData = useRef([]);\r\n\r\n    const [data, setData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    // Esta función es llamada por los cada componente hijo (CompraFiltros) cuando se modifican los valores seleccionados\r\n    // Todos los valores de los filtros se guardan en un solo arreglo \r\n    function modifyData(data, index) {\r\n        filterData.current[index] = data;\r\n    }\r\n\r\n    function addFiltro() {\r\n        if (numFiltros.current < maxNum) {\r\n            numFiltros.current = numFiltros.current + 1;\r\n            setFilters([...filters, <ComparaFiltros id={numFiltros.current} modifyData={modifyData} sensores={sensores}/>]);\r\n        }\r\n    }\r\n\r\n    // Elimina el último filtro\r\n    function deleteFiltro() {\r\n        if (numFiltros.current != -1) {\r\n            let filtroDiv = document.getElementById(`filtro-${numFiltros.current}`).parentNode;\r\n            filtroDiv.parentNode.removeChild(filtroDiv);\r\n            numFiltros.current = numFiltros.current - 1;\r\n        }\r\n    }\r\n\r\n    function queryData() {\r\n        if (numFiltros.current < 0) {\r\n            return;\r\n        }\r\n        let ubicaciones = \"\";\r\n        let gases = \"\";\r\n        let fechas_inicio = \"\";\r\n        let fechas_fin = \"\";\r\n\r\n        for (let i=0; i<=numFiltros.current ; i++) {\r\n            if (!filterData.current[i]|| !filterData.current[i][\"desde\"] || !filterData.current[i][\"hasta\"]) { // A alguno le falta seleccionar fechas\r\n                alert(\"Selecciona las fechas\");\r\n                return;\r\n            } else {\r\n                // Unir con comas\r\n                ubicaciones += filterData.current[i][\"ubic\"].label + \",\";\r\n                gases += filterData.current[i][\"ind\"] + \",\";\r\n                fechas_inicio += filterData.current[i][\"desde\"] + \"/\" + filterData.current[i][\"desdeHora\"] + \",\";\r\n                fechas_fin += filterData.current[i][\"hasta\"] + \"/\" + filterData.current[i][\"hastaHora\"] + \",\";\r\n            }\r\n        }\r\n\r\n        // Quitar última coma\r\n        ubicaciones = ubicaciones.slice(0, -1);\r\n        gases = gases.slice(0, -1);\r\n        fechas_inicio = fechas_inicio.slice(0, -1);\r\n        fechas_fin = fechas_fin.slice(0, -1);\r\n\r\n        let query = `ubic=${ubicaciones}&ind=${gases}&inicio=${fechas_inicio}&fin=${fechas_fin}`;\r\n\r\n        setLoading(true); // Muestra gif de loading\r\n\r\n        fetch(`${apiUrl}/compare?${query}`)\r\n            .then((response) => response.json())\r\n            .then((json) => {\r\n                setLoading(false);\r\n                setData(json)\r\n            });\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        createGraph();\r\n    }, [data])\r\n\r\n    const [limiteOMS, setLimiteOMS] = useState(null);\r\n\r\n    let graphLayout = {\r\n        title: {\r\n            text: 'Compara datos',\r\n        },\r\n        showlegend: true,\r\n        hovermode: 'closest',\r\n        width: 1000,\r\n        height: 700\r\n    };\r\n\r\n    let getAnnotations = () => [\r\n        {\r\n            xref: 'paper',\r\n            x: 1.01,\r\n            y: (limiteOMS),\r\n            xanchor: 'left',\r\n            yanchor: 'middle',\r\n            text: 'Límite recomendado <br>por la OMS 24h',\r\n            showarrow: false,\r\n            font: {\r\n                family: 'Arial',\r\n                size: 12,\r\n                color: 'white'\r\n            },\r\n            bgcolor: '#4682b4',\r\n        }\r\n    ];\r\n\r\n    let getShapes = () => {\r\n        let min1, max1, min2, max2, min3, max3, min4, max4, min5, max5;\r\n\r\n        switch(gas) {\r\n            case 'PM2.5':\r\n                min1 = 0;\r\n                max1 = 25;\r\n                min2 = 25;\r\n                max2 = 45;\r\n                min3 = 45;\r\n                max3 = 79;\r\n                min4 = 79;\r\n                max4 = 147;\r\n                min5 = 147;\r\n                max5 = 172;\r\n                break;\r\n            case 'PM10':\r\n                min1 = 0;\r\n                max1 = 50;\r\n                min2 = 50;\r\n                max2 = 75;\r\n                min3 = 75;\r\n                max3 = 155;\r\n                min4 = 155;\r\n                max4 = 235;\r\n                min5 = 235;\r\n                max5 = 255;\r\n                break;\r\n            case 'O3':\r\n                min1 = 0;\r\n                max1 = 0.051;\r\n                min2 = 0.051;\r\n                max2 = 0.070;\r\n                min3 = 0.070;\r\n                max3 = 0.092;\r\n                min4 = 0.092;\r\n                max4 = 0.114;\r\n                min5 = 0.114;\r\n                max5 = 0.139;\r\n                break;\r\n            case 'CO':\r\n                min1 = 0;\r\n                max1 = 8.75;\r\n                min2 = 8.75;\r\n                max2 = 11;\r\n                min3 = 11;\r\n                max3 = 13.3;\r\n                min4 = 13.3;\r\n                max4 = 15.5;\r\n                min5 = 15.5;\r\n                max5 = 17.5;\r\n                break;\r\n            case 'NO2':\r\n                min1 = 0;\r\n                max1 = 0.107;\r\n                min2 = 0.107;\r\n                max2 = 0.210;\r\n                min3 = 0.210;\r\n                max3 = 0.230;\r\n                min4 = 0.230;\r\n                max4 = 0.250;\r\n                min5 = 0.250;\r\n                max5 = 0.275;\r\n                break;\r\n            case 'SO2':\r\n                min1 = 0;\r\n                max1 = 0.008;\r\n                min2 = 0.008;\r\n                max2 = 0.110;\r\n                min3 = 0.110;\r\n                max3 = 0.165;\r\n                min4 = 0.165;\r\n                max4 = 0.220;\r\n                min5 = 0.220;\r\n                max5 = 0.255;\r\n                break;\r\n            default:\r\n                min1 = 0;\r\n                max1 = 25;\r\n                min2 = 25;\r\n                max2 = 45;\r\n                min3 = 45;\r\n                max3 = 79;\r\n                min4 = 79;\r\n                max4 = 147;\r\n                min5 = 147;\r\n                max5 = 172;\r\n                break;\r\n        }\r\n\r\n        let shapes = [\r\n            // Nivel 1\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min1,\r\n                x1: 1,\r\n                y1: max1,\r\n                fillcolor: 'rgb(0, 228, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 2\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min2,\r\n                x1: 1,\r\n                y1: max2,\r\n                fillcolor: 'rgb(255, 255, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 3\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min3,\r\n                x1: 1,\r\n                y1: max3,\r\n                fillcolor: 'rgb(255, 126, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 4\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min4,\r\n                x1: 1,\r\n                y1: max4,\r\n                fillcolor: 'rgb(255, 0, 0)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            }, \r\n            // Nivel 5\r\n            {\r\n                type: 'rect',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: min5,\r\n                x1: 1,\r\n                y1: max5,\r\n                fillcolor: 'rgb(143, 63, 151)',\r\n                opacity: 0.3,\r\n                line: {\r\n                    width: 0\r\n                }\r\n            },\r\n            {\r\n                type: 'line',\r\n                xref: 'paper',\r\n                x0: 0,\r\n                y0: limiteOMS,\r\n                x1: 1,\r\n                y1: limiteOMS,\r\n                line:{\r\n                    color: '#4682b4',\r\n                    width: 2,\r\n                    dash:'dash'\r\n                }\r\n            } \r\n        ];\r\n        \r\n        return shapes\r\n    }\r\n\r\n\r\n    const [graphData, setGraphData] = useState([]);\r\n    const [gas, setGas] = useState(null);\r\n\r\n    let colors = ['red', 'green', 'blue', 'orange']; // Opciones de color de las líneas\r\n    let colors2 = ['purple', 'pink', 'black', 'cyan']; // Opciones de color de las líneas\r\n    let colors3 = ['orange', 'brown', 'grey', 'maroon']; // Opciones de color de las líneas\r\n\r\n    function createGraph() {\r\n        let graph = [];\r\n        if (data) {\r\n            for (let i = 0; i < data.length; i++) {\r\n                let ubicacion = sensores.find(sensor => sensor.sensor_id === filterData.current[i][\"ubic\"].value).zona;\r\n                let gas = filterData.current[i][\"ind\"] === \"PM25\" ? \"PM2.5\" : filterData.current[i][\"ind\"];\r\n                setGas(gas);\r\n\r\n                switch(gas) {\r\n                    case 'PM2.5':\r\n                        setLimiteOMS(15);\r\n                        break;\r\n                    case 'PM10':\r\n                        setLimiteOMS(45);\r\n                        break;\r\n                    case 'O3':\r\n                        setLimiteOMS(0.051);\r\n                        break;\r\n                    case 'NO2':\r\n                        setLimiteOMS(0.013);\r\n                        break;\r\n                    case 'SO2':\r\n                        setLimiteOMS(0.015);\r\n                        break;\r\n                    default:\r\n                        setLimiteOMS(null);\r\n                        break;\r\n                }\r\n\r\n                data[i].name = `${ubicacion} (${gas})`; \r\n                data[i].type = \"scatter\";\r\n                data[i].mode = \"lines\";\r\n                data[i].marker = { color: colors[i] };\r\n                \r\n                data[i].text = data[i].dia.map(function(d) { return moment.utc(new Date(d)).format('DD-MM-YYYY HH:mm:ss') } );\r\n\r\n                data[i].hovertemplate = '<i>Medida</i>: %{y:.4f}' +'<br><b>%{text}</b>'; // Tooltip\r\n\r\n                graph.push(data[i]);\r\n\r\n                if(gas === 'PM2.5' || gas === 'PM10') {\r\n                    // Agregar promedio movil 24h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 24h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                    \r\n                    // Agregar Indice aire y salud\r\n                    const dataICAR = { ...data[i] }\r\n                    dataICAR.name = `${ubicacion} (${gas}) Indice Aire y Salud`\r\n                    dataICAR.marker = { color: colors3[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataICAR.y = dataICAR.ICAR;\r\n                    graph.push(dataICAR)\r\n\r\n                } else if (gas === 'SO2') {\r\n                    // Agregar promedio movil 24h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 24h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<23;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                    \r\n                } else if (gas === 'CO') {\r\n                    // Agregar promedio movil 8h\r\n                    const dataPromMovil = { ...data[i] }\r\n                    dataPromMovil.name = `${ubicacion} (${gas}) Promedio movil 8h`\r\n                    dataPromMovil.marker = { color: colors2[i] }\r\n                    // for(let i=0;i<7;i++) {\r\n                    //     moving_average.unshift(null)\r\n                    // }\r\n                    dataPromMovil.y = dataPromMovil.moving_average;\r\n                    graph.push(dataPromMovil)\r\n                }\r\n            }\r\n\r\n            setGraphData(graph);\r\n        }\r\n\r\n    }\r\n    \r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <div className=\"ta-center mb-5\">\r\n                <h2>Compara datos</h2>\r\n                <p>Compara la calidad del aire en diferente lugar y tiempo</p>\r\n            </div>\r\n            <hr className=\"mb-4\"/>\r\n            <Row className=\"mt-2 mb-1 d-flex justify-content-center\" id=\"filtros\">\r\n                {filters}\r\n            </Row>\r\n            <Row className=\"d-flex justify-content-end\">\r\n                <Col sm={6} className=\"d-flex justify-content-between\">\r\n                    <Button onClick={() => addFiltro()}>Agregar un filtro</Button>\r\n                    <Button onClick={() => deleteFiltro()}>Eliminar un filtro</Button>\r\n                    <Button onClick={() => queryData()}>Generar gráfica</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n            <Col sm={12}>\r\n                <div className=\"text-center\">\r\n                    <img\r\n                        src=\"loading.gif\"\r\n                        alt=\"Cargando...\"\r\n                        className=\"loading\"\r\n                        style={loading ? {} : { display: 'none' }}\r\n                    />\r\n                </div>\r\n                <div class=\"grafico-compara mt-5\">\r\n                    <Plot\r\n                        data={graphData}\r\n                        layout={ data ? {...graphLayout, shapes: getShapes(), annotations: getAnnotations()} : {...graphLayout}}\r\n                    />\r\n                </div>\r\n            </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Compara\r\n","export const gases = [\r\n    {\r\n        name: 'PM25',\r\n        label: 'PM2.5',\r\n        units: 'μg/m3',\r\n    },\r\n    {\r\n        name: 'PM10',\r\n        units: 'μg/m3',\r\n    },\r\n    {\r\n        name: 'O3',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'CO',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'NO2',\r\n        units: 'ppm',\r\n    },\r\n    {\r\n        name: 'SO2',\r\n        units: 'ppm',\r\n    },\r\n];\r\n\r\n// Opciones del dropdown de sistemas:\r\nexport const systemOptions = [\r\n    {value: \"PurpleAir\", label: 'PurpleAir', opt: 'P'},\r\n    {value: \"Sinaica\", label: 'Sinaica', opt: 'G'},\r\n    {value: \"AireNuevoLeon\", label: 'AireNuevoLeon', opt: 'G'}\r\n]\r\n\r\n// Opciones del dropdown de gases:\r\nexport const indicadores = [\r\n    { value: 'PM25', label: 'PM2.5' },\r\n    { value: 'PM10', label: 'PM10' },\r\n    { value: 'O3', label: 'O3' },\r\n    { value: 'CO', label: 'CO' },\r\n    { value: 'NO2', label: 'NO2' },\r\n    { value: 'SO2', label: 'SO2' },\r\n];\r\n\r\nexport const unidad = {\r\n    PM25: 'µg/m3',\r\n    PM10: 'µg/m3',\r\n    CO: 'ppm',\r\n    O3: 'ppm',\r\n    NO2: 'ppm',\r\n    SO2: 'ppm',\r\n};\r\nexport const idBlacklist = [\r\n    'P36757',\r\n    'P47305',\r\n    'P39499',\r\n    'P46239',\r\n    'P50855',\r\n    'P35099',\r\n    'P39709',\r\n    'P39497',\r\n    'P39285',\r\n    'P39355',\r\n\r\n\r\n\r\n];\r\nexport const idBlacklistpriv = [\r\n    'P39497',\r\n    'P39285',\r\n    'P39355'\r\n\r\n];\r\nexport const mapBlacklist = [\r\n    'Sinaica', \r\n\r\n];\r\n\r\nexport const apiUrl =\r\n    process.env.NODE_ENV === 'production'\r\n        ? process.env.REACT_APP_API_URL\r\n        : 'http://127.0.0.1:8000';\r\n","import { apiUrl } from '../constants';\r\n\r\nconst retry = (fn, ms = 1000, retries = 5) =>\r\n    new Promise((resolve, reject) => {\r\n        fn()\r\n            .then(resolve)\r\n            .catch(() => {\r\n                setTimeout(() => {\r\n                    if (!retries) {\r\n                        return reject(\r\n                            'Se excedió el número máximo de intentos'\r\n                        );\r\n                    }\r\n                    retry(fn, ms, retries - 1).then(resolve, reject);\r\n                }, ms);\r\n            });\r\n    });\r\n\r\nconst fetchSummaryDataFn = () =>\r\n    new Promise((resolve, reject) => {\r\n        fetch(`${apiUrl}/sensor-summary`)\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n                    return res.json();\r\n                } else {\r\n                    reject();\r\n                }\r\n            })\r\n            .then((json) => {\r\n                resolve(json);\r\n            })\r\n            .catch((err) => reject(err));\r\n    });\r\n\r\nexport const fetchSummaryData = () => {\r\n    return retry(fetchSummaryDataFn);\r\n};\r\n"],"sourceRoot":""}