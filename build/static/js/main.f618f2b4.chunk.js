(this.webpackJsonpcei=this.webpackJsonpcei||[]).push([[0],{116:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(14),s=a.n(n),r=(a(96),a(97),a(20)),i=a(13),l=a(8),o=a(138),d=a(139),j=a(2),u=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(j.jsxs)(o.a,{variant:"dark",expand:"lg",expanded:a,children:[Object(j.jsx)(o.a.Brand,{children:Object(j.jsx)(r.c,{to:"/",children:Object(j.jsx)("img",{src:"/logo.jpg",width:"40",height:"40",className:"d-inline-block align-top",alt:"React Bootstrap logo"})})}),Object(j.jsx)(o.a.Text,{children:Object(j.jsx)("h1",{className:"white h1-nav mb-0",children:"Comit\xe9 Ecol\xf3gico Integral (Beta)"})}),Object(j.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return n(!a&&"expanded")}}),Object(j.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(j.jsxs)(d.a,{className:"ml-auto",children:[Object(j.jsx)(r.c,{onClick:function(){return n(!1)},activeClassName:"nav-active",className:"menu-link",exact:!0,to:"/",children:"Mapa"}),Object(j.jsx)(r.c,{onClick:function(){return n(!1)},activeClassName:"nav-active",className:"menu-link",to:"/registro",children:"Registro hist\xf3rico"}),Object(j.jsx)(r.c,{onClick:function(){return n(!1)},activeClassName:"nav-active",className:"menu-link",to:"/compara",children:"Compara datos"}),Object(j.jsx)(r.c,{onClick:function(){return n(!1)},activeClassName:"nav-active",className:"menu-link",to:"/",children:"Acerca de"})]})})]})},b=function(){return Object(j.jsx)("footer",{children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-auto py-3",children:[Object(j.jsxs)("p",{className:"mb-1 mt-2",children:["Los datos oficiales provienen de"," ",Object(j.jsx)("a",{className:"text-white",href:"https://sinaica.inecc.gob.mx/",children:"Sinaica"})," ","y de ",Object(j.jsx)("a",{className:"text-white",href:"http://aire.nl.gob.mx/",children:"Sima"})]}),Object(j.jsx)("p",{className:"mb-1",children:"Patrocinado por Natuuramika\xae 2021"}),Object(j.jsx)("p",{children:"Proyecto Solidario TEC de Monterrey"})]})})})})},m=a(10),O=a(140),x=a(89),h=function(e){var t;return Object(j.jsxs)("div",{className:"container mt-5 mb-3",children:[Object(j.jsxs)("div",{className:"ta-center mb-5",children:[Object(j.jsx)("h3",{children:"Concentraci\xf3n horaria"}),Object(j.jsx)("p",{children:"Conoce las recomendaciones seg\xfan el \xedndice de calidad del aire"})]}),Object(j.jsxs)(O.a.Container,{fill:!0,activeKey:null!==(t=e.selected)&&void 0!==t?t:"buena",className:"recomendaciones h-100",children:[Object(j.jsxs)(d.a,{fill:!0,children:[Object(j.jsx)(d.a.Item,{children:Object(j.jsx)(x.a,{eventKey:"buena",className:"nav-buena",children:"Buena"})}),Object(j.jsx)(d.a.Item,{children:Object(j.jsx)(x.a,{eventKey:"acept",className:"nav-acept",children:"Aceptable"})}),Object(j.jsx)(d.a.Item,{children:Object(j.jsx)(x.a,{eventKey:"mala",className:"nav-mala",children:"Mala"})}),Object(j.jsx)(d.a.Item,{children:Object(j.jsx)(x.a,{eventKey:"muy",className:"nav-muy",children:"Muy Mala"})}),Object(j.jsx)(d.a.Item,{children:Object(j.jsx)(x.a,{eventKey:"ext",className:"nav-ext",children:"Extremadamente Mala"})})]}),Object(j.jsxs)(O.a.Content,{children:[Object(j.jsx)(O.a.Pane,{eventKey:"buena",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Realizar actividades al aire libre"}),Object(j.jsx)("li",{children:"Ejercitarse al aire libre"}),Object(j.jsx)("li",{children:"Sin riesgo para personas vulnerables"})]})}),Object(j.jsx)(O.a.Pane,{eventKey:"acept",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Realizar actividades al aire libre"}),Object(j.jsx)("li",{children:"Ejercitarse al aire libre"}),Object(j.jsx)("li",{children:"Personas vulnerables limitar actividades f\xedsicas"})]})}),Object(j.jsx)(O.a.Pane,{eventKey:"mala",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Limitar actividades f\xedsicas al aire libre, incrementar frecuencia de descansos, vigilar que estudiantes no presenten s\xedntomas de afecciones respiratorias."}),Object(j.jsx)("li",{children:"Limitar tiempo de exposici\xf3n"}),Object(j.jsx)("li",{children:"Personas vulnerables permanecer en interiores sin actividad f\xedsica"}),Object(j.jsx)("li",{children:"Considerar suspender entrenamientos y partidos de ligas deportivas y actividades f\xedsicas extracurriculares"}),Object(j.jsx)("li",{children:"Se recomienda el uso de mascarillas reutilizables N95 con certificaci\xf3n NIOSH*"})]})}),Object(j.jsx)(O.a.Pane,{eventKey:"muy",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Evitar actividades al aire libre"}),Object(j.jsx)("li",{children:"Evitar ejercitarse al aire libre o en interiores que no cuenten con sistemas de purificaci\xf3n de aire"}),Object(j.jsx)("li",{children:"Cerrar puertas y ventanas"}),Object(j.jsx)("li",{children:"Personas vulnerables permanecer en interiores sin actividad f\xedsica"}),Object(j.jsx)("li",{children:"Acudir al m\xe9dico en caso de s\xedntomas de afectaciones a la salud"}),Object(j.jsx)("li",{children:"Evitar fogatas y uso de combustibles s\xf3lidos como carb\xf3n o le\xf1a"}),Object(j.jsx)("li",{children:"Suspender entrenamientos y partidos de ligas deportivas y actividades f\xedsicas extracurriculares"}),Object(j.jsx)("li",{children:"Suspender el uso de cigarros de cualquier tipo"}),Object(j.jsx)("li",{children:"Limitar el uso de veh\xedculos que usen combustibles f\xf3siles"}),Object(j.jsx)("li",{children:"Se recomienda fuertemente el uso de mascarillas reutilizables N95 con certificaci\xf3n NIOSH*"})]})}),Object(j.jsx)(O.a.Pane,{eventKey:"ext",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Evitar actividades al aire libre"}),Object(j.jsx)("li",{children:"Evitar ejercitarse al aire libre o en interiores que no cuenten con sistemas de purificaci\xf3n de aire"}),Object(j.jsx)("li",{children:"Cerrar puertas y ventanas"}),Object(j.jsx)("li",{children:"Personas vulnerables permanecer en interiores sin actividad f\xedsica"}),Object(j.jsx)("li",{children:"Acudir al m\xe9dico o solicitar servicios de emergencias en caso de s\xedntomas de afectaciones a la salud"}),Object(j.jsx)("li",{children:"Evitar fogatas y uso de combustibles s\xf3lidos como carb\xf3n o le\xf1a"}),Object(j.jsx)("li",{children:"Se recomienda fuertemente el uso de mascarillas reutilizables N95 con certificaci\xf3n NIOSH*"}),Object(j.jsx)("li",{children:"Suspender entrenamientos y partidos de ligas deportivas y actividades f\xedsicas extracurriculares"}),Object(j.jsx)("li",{children:"Suspender el uso de cigarros de cualquier tipo"}),Object(j.jsx)("li",{children:"Limitar el uso de veh\xedculos que usen combustibles f\xf3siles"})]})})]})]})]})},p=a(137),f=a(82),v=a(127),g=a(135),N=a(128),y=a(83),S=a(136),C=a(84),P=a(19),M=a(21),k=a(9),A=[{value:"PurpleAir",label:"PurpleAir",opt:"P"},{value:"AireNuevoLeon",label:"AireNuevoLeon",opt:"G"}],D=[{value:"1",label:"Tiempo real"},{value:"2",label:"12 horas"},{value:"3",label:"24 horas"},{value:"4",label:"\xdaltima semana"},{value:"5",label:"\xdaltimo mes"},{value:"6",label:"\xdaltimo a\xf1o"}],R=function(e){var t=e.onApply,a=Object(P.c)((function(e){return e})).sensorData,n=Object(c.useState)(""),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useMemo)((function(){return a.filter((function(e){return"number"===typeof e.Longitud&&"number"===typeof e.Latitud&&e.Sistema===r.label&&!k.c.includes(e.Sensor_id)&&!k.d.includes(e.Sensor_id)})).map((function(e){return{value:e.Sensor_id,label:e.Zona}}))}),[a,r]),d=Object(c.useState)(k.e),u=Object(l.a)(d,2),b=u[0],m=u[1];Object(c.useEffect)((function(){"PurpleAir"===r.label?m([k.e[0]]):m(k.e)}),[r]);var O=Object(c.useState)(!1),x=Object(l.a)(O,2),h=x[0],R=x[1],w=Object(c.useState)(null),_=Object(l.a)(w,2),I=_[0],L=_[1],Y=Object(c.useState)(D[0]),z=Object(l.a)(Y,2),E=z[0],F=z[1],H=Object(c.useState)(k.e[0]),q=Object(l.a)(H,2),U=q[0],T=q[1],B=function(){return R(!1)};return Object(j.jsxs)("div",{className:"container mt-5",children:[Object(j.jsxs)(p.a,{children:[Object(j.jsx)("p",{style:{fontSize:"0.9em"},children:"*Recuerda que el sistema PurpleAir solo tiene disponible el contaminante PM2.5"}),Object(j.jsxs)(p.a.Row,{className:"mapa-filtros",children:[Object(j.jsxs)(f.a,{className:"mb-3",xs:12,lg:4,children:[Object(j.jsx)(M.a,{placeholder:"Sistema",value:r,onChange:function(e){i(e),L(null)},options:A}),Object(j.jsx)(M.a,{placeholder:"Ubicaci\xf3n",value:I,onChange:L,options:o})]}),Object(j.jsx)(f.a,{className:"mb-3",xs:6,lg:3,children:Object(j.jsx)(M.a,{isDisabled:!0,options:D,onChange:F,value:E})}),Object(j.jsx)(f.a,{xs:6,lg:3,children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{xs:10,children:Object(j.jsx)(M.a,{options:b,value:U,onChange:T})}),Object(j.jsx)(f.a,{xs:2,children:Object(j.jsx)(g.a,{placement:"top",overlay:Object(j.jsx)(N.a,{children:"Info. indicadores"}),children:Object(j.jsx)(y.a,{className:"info-btn",variant:"link",onClick:function(){return R(!0)},children:Object(j.jsx)(C.a,{color:"MediumVioletRed"})})},"top")})]})}),Object(j.jsx)(f.a,{children:Object(j.jsx)(y.a,{className:"btn-aplicar",variant:"primary",block:!0,onClick:function(){t({gas:U,location:I,interval:E}),L(null),F(D[0])},children:"Aplicar"})})]})]}),Object(j.jsxs)(S.a,{size:"lg",show:h,onHide:B,children:[Object(j.jsx)(S.a.Header,{closeButton:!0,children:Object(j.jsx)(S.a.Title,{children:"Indicadores"})}),Object(j.jsxs)(S.a.Body,{children:[Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"PM 10"}),"\u2003 Material Particulado menor a 10 micr\xf3metros"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Mezcla compleja de part\xedculas l\xedquidas o s\xf3lidas que provienen de fuentes naturales o de fuentes antropog\xe9nicas, poseen un tama\xf1o aerodin\xe1mico menor a 10 micr\xf3metros."})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"PM 2.5"}),"\u2003 Material Particulado menor a 2.5 micr\xf3metros"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Mezcla Compleja de Part\xedculas l\xedquidas o s\xf3lidas que provienen principalmente de fuentes antropog\xe9nicas, poseen un tama\xf1o aerodin\xe1mico menor a 2.5 micr\xf3metros."})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"O2"}),"\u2003 Ozono"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Gas compuesto por 3 \xe1tomos de oxigeno que se encuentra principalmente en la estratosfera, puede formarse a nivel superficial debido a condiciones de alta radiaci\xf3n y temperatura."})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"CO"}),"\u2003 Mon\xf3xido de Carbono"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Gas incoloro que se forma principalmente por la combusti\xf3n de gasolinas, le\xf1a o carb\xf3n, este compuesto, en altas concentraciones puede ser muy nocivo a la salud."})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"SO2"}),"\u2003 Di\xf3xido de Azufre"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Es un gas formado por 2 \xe1tomos de ox\xedgeno y uno de azufre, se forma principalmente por la combusti\xf3n de combustibles f\xf3siles con alto contenido de azufre."})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)("h3",{className:"mod-sub",children:[Object(j.jsx)("span",{className:"mod-ind morado",children:"NO2"}),"\u2003 Di\xf3xido de Nitr\xf3geno"]})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("p",{className:"mod-desc",children:"Mol\xe9cula con 2 \xe1tomos de ox\xedgeno y uno de Nitr\xf3geno que se produce principalmente por la combusti\xf3n de combustibles f\xf3siles empleados en veh\xedculos y plantas de energ\xeda."})})]}),Object(j.jsx)(S.a.Footer,{children:Object(j.jsx)(y.a,{variant:"secondary",onClick:B,children:"Cerrar"})})]})]})},w=a(29),_=a(28),I=(a(80),a(129)),L=a(130),Y=a(11),z=a.n(Y),E=function(e){if("number"!=typeof e)return e;var t=e.toFixed(2);return parseInt(t)===e?e:t};function F(e){var t=e.ICAR_PM25,a=e.ICAR_PM10,n=e.ICAR_O3,i=e.ICAR_CO,o=e.ICAR_NO2,d=e.ICAR_SO2,u=e.sensor_id,b=e.label,O=e.status,x=e.position,h=e.current,v=e.provider,g=e.locationStr,N=e.labels,S=e.lastUpdate,C=(e.map,e.shape),P=void 0===C?"round":C,M=Object(w.a)(e,["ICAR_PM25","ICAR_PM10","ICAR_O3","ICAR_CO","ICAR_NO2","ICAR_SO2","sensor_id","label","status","position","current","provider","locationStr","labels","lastUpdate","map","shape"]),k=Object(c.useMemo)((function(){return document.createElement("div")}),[]),A=Object(c.useRef)(),D=Object(c.useState)(null),R=Object(l.a)(D,2),Y=R[0],F=R[1],H=Object(c.useCallback)((function(e,t){s.a.render(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"round";return Object(j.jsxs)("div",{className:"marker-wrapper",style:{zIndex:"round"===a?-1:-10},children:[Object(j.jsx)("div",{className:"marker-".concat(t," marker-base marker-shape-").concat(a)}),Object(j.jsx)("span",{className:"marker-".concat(t),style:{backgroundColor:"transparent"},children:E(e)})]})}(e,t,P),k),F(Object(_.divIcon)({html:k,className:"sensor-icon ".concat("round"===P?"":"behind"),popupAnchor:[7,0]}))}),[P]);return Object(c.useEffect)((function(){H(b,O)}),[b,O,H]),Y?Object(j.jsx)(I.a,Object(m.a)(Object(m.a)({position:x,icon:Y},M),{},{children:Object(j.jsxs)(L.a,{ref:A,className:"custom-popup",closeButton:function(e){return Object(j.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{type:"button",class:"btn-close","aria-label":"Close"}))},children:[Object(j.jsxs)("div",{className:"px-3 py-2",children:[Object(j.jsxs)("div",{className:"rounded marker-".concat(h.status),style:{display:"flex",justifyContent:"center",padding:"0 0.1rem "},children:[h.indicator,": ",h.label," ",h.units]}),Object(j.jsxs)("div",{className:"data-label",children:[Object(j.jsx)("small",{className:"text-muted",children:"Ubicaci\xf3n"}),Object(j.jsx)("br",{}),Object(j.jsx)("data",{children:g})]}),Object(j.jsxs)("div",{className:"data-label",children:[Object(j.jsx)("small",{className:"text-muted",children:"\xdaltima actualizaci\xf3n"}),Object(j.jsx)("br",{}),Object(j.jsx)("time",{children:z()(S).format("ddd, MMMM D YYYY, h:mm:ss a")})]}),Object(j.jsxs)("div",{className:"data-label2",children:[Object(j.jsx)("small",{className:"text-muted",children:"Tiempo Real"}),Object(j.jsx)("small",{className:"text-muted ml-5",children:"Indice Calidad Aire"})]}),Object(j.jsx)(p.a,{children:N.map((function(e,c){var s=e.label,l=e.status,b=e.value,m=e.units;return"P"===u[0]?"PM2.5"===s?Object(j.jsxs)(p.a.Row,{className:"d-flex justify-content-between  mb-1 ",children:[Object(j.jsx)(f.a,{xs:3,children:Object(j.jsx)(r.b,{to:{pathname:"registro",search:"?gas=".concat(s)},children:s})}),Object(j.jsxs)(f.a,{className:"d-flex justify-content-between px-1 rounded marker-".concat(l),xs:5,children:[Object(j.jsx)("span",{children:b}),Object(j.jsx)("span",{children:m})]}),Object(j.jsx)(f.a,{className:"d-flex justify-content-between px-1 rounded marker-".concat(l),xs:3,children:"PM2.5"===s?"-1.00"==t||"0.00"==t?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:t.toFixed(2)}):"PM10"===s?"-1.00"==a||"0.00"==a?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:a.toFixed(0)}):"O3"===s?"-1.00"==n||"0.00"==n?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:n.toFixed(3)}):"CO"===s?"-1.00"==i||"0.00"==i?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:i.toFixed(2)}):"NO2"===s?"-1.00"==o||"0.00"==o?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:o.toFixed(4)}):"SO2"===s?"-1.00"==d||"0.00"==d?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:d.toFixed(4)}):Object(j.jsx)("span",{children:"ND"})})]},c):null:Object(j.jsxs)(p.a.Row,{className:"d-flex justify-content-between  mb-1 ",children:[Object(j.jsx)(f.a,{xs:3,children:Object(j.jsx)(r.b,{to:{pathname:"registro",search:"?gas=".concat(s)},children:s})}),Object(j.jsxs)(f.a,{className:"d-flex justify-content-between px-1 rounded marker-".concat(l),xs:5,children:[Object(j.jsx)("span",{children:b}),Object(j.jsx)("span",{children:m})]}),Object(j.jsx)(f.a,{className:"d-flex justify-content-between px-1 rounded marker-".concat(l),xs:3,children:"PM2.5"===s?"-1.00"==t||"0.00"==t?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:t.toFixed(2)}):"PM10"===s?"-1.00"==a||"0.00"==a?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:a.toFixed(0)}):"O3"===s?"-1.00"==n||"0.00"==n?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:n.toFixed(3)}):"CO"===s?"-1.00"==i||"0.00"==i?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:i.toFixed(2)}):"NO2"===s?"-1.00"==o||"0.00"==o?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:o.toFixed(4)}):"SO2"===s?"-1.00"==d||"0.00"==d?Object(j.jsx)("span",{children:"ND"}):Object(j.jsx)("span",{children:d.toFixed(4)}):Object(j.jsx)("span",{children:"ND"})})]},c)}))})]}),Object(j.jsxs)("div",{className:"py-2 px-3 border-top text-center",children:[Object(j.jsx)(y.a,{size:"sm",children:"M\xe1s informaci\xf3n"}),Object(j.jsxs)("p",{className:"lh-sm mt-2 mb-0",children:["Fuente(s): ",Object(j.jsx)("a",{target:"blank",href:v.ref,children:v.name})]})]})]})})):null}F.defaultProps={};var H=F,q=(a(116),a(131)),U=a(142);function T(e){var t=e.center,a=e.children,c=Object(w.a)(e,["center","children"]);return Object(j.jsxs)(q.a,Object(m.a)(Object(m.a)({center:t,scrollWheelZoom:!1,style:{height:"100%",widht:"100%"}},c),{},{children:[Object(j.jsx)(U.a,{attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',url:"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png?api_key=e4368efd-701c-4da6-8372-03f4040a622a"}),a]}))}T.defaultProps={};var B=T,G=a(46),K=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return new Promise((function(n,s){t().then(n).catch((function(){setTimeout((function(){if(!c)return s("Se excedi\xf3 el n\xfamero m\xe1ximo de intentos");e(t,a,c-1).then(n,s)}),a)}))}))},V=function(){return new Promise((function(e,t){fetch("".concat(k.a,"/sensor-summary")).then((function(e){if(200===e.status)return e.json();t()})).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},Z=function(){return K(V)},Q=a(87),J=Object(Q.a)({name:"data",initialState:{sensorData:[],sensorDataLastUpdate:null},reducers:{setSensorData:function(e,t){Array.isArray(t.payload)&&(e.sensorData=t.payload,e.sensorDataLastUpdate=z()())}}}),W=J.actions.setSensorData,X=J.reducer,$=function(e){var t=e.cacheTime,a=void 0===t?60:t,n=e.useCache,s=void 0===n||n,r=Object(P.c)((function(e){return e})),i=r.sensorDataLastUpdate,o=r.sensorData,d=Object(P.b)(),j=Object(c.useState)(!0),u=Object(l.a)(j,2),b=u[0],m=u[1],O=Object(c.useState)(o),x=Object(l.a)(O,2),h=x[0],p=x[1],f=Object(c.useState)(null),v=Object(l.a)(f,2),g=v[0],N=v[1];return Object(c.useEffect)((function(){(i&&s?z()().diff(i,"minutes"):999)>a?Z().then((function(e){d(W(e)),p(e)})).catch((function(e){console.error(e),p([]),N(e)})).finally((function(){return m(!1)})):m(!1)}),[i,d,a,s]),{loading:b,data:h,error:g}},ee=a(132),te=a(141),ae={center:[25.67,-100.25],zoom:11,minZoom:10};var ce=function(){var e=Object(c.useState)(k.b[0]),t=Object(l.a)(e,2),a=t[0],n=t[1],s=$({}),r=s.data,i=s.loading,o=s.error,d=Object(c.useState)(null),u=Object(l.a)(d,2),b=u[0],O=u[1],x=Object(c.useCallback)((function(e){b&&b.setView(e,ae.zoom,{animate:!0})}),[b]),p=Object(c.useMemo)((function(){if(null==r)return console.log("No data yet"),0;var e=0;return r.filter((function(e){return"number"===typeof e.Longitud&&"number"===typeof e.Latitud&&!k.f.includes(e.Sistema)&&!k.c.includes(e.Sensor_id)})).map((function(t){var c=a.name,n=(a.units,"PM25"===c&&"PurpleAir"===t.Sistema?t.PM25_Promedio:t[c]),s="number"===typeof n?n:"ND",r=Object(G.c)(c,s);r>e&&(e=r)})),e}),[r]),f=Object(c.useMemo)((function(){return r.filter((function(e){return"number"===typeof e.Longitud&&"number"===typeof e.Latitud&&!k.f.includes(e.Sistema)&&!k.c.includes(e.Sensor_id)})).map((function(e){var t,c=a.name,n=a.units,s="PM25"===c&&"PurpleAir"===e.Sistema?e.PM25_Promedio:e[c],r="number"===typeof s?s:"ND";return{ICAR_PM25:+e.ICAR_PM25,ICAR_PM10:+e.ICAR_PM10,ICAR_O3:+e.ICAR_O3,ICAR_CO:+e.ICAR_CO,ICAR_NO2:+e.ICAR_NO2,ICAR_SO2:+e.ICAR_SO2,sensor_id:e.Sensor_id,position:[e.Latitud,e.Longitud],current:{indicator:a.label?a.label:c,label:r,units:n,status:"ND"!==r?Object(G.c)(c,r):99,ref:"#"},lastUpdate:z.a.utc(e.Dia).local(),locationStr:(null===(t=e.Zona)||void 0===t?void 0:t.length)>0?e.Zona:"ND",provider:{name:e.Sistema,ref:"PurpleAir"===e.Sistema?"https://www.purpleair.com/map?mylocation":"AireNuevoLeon"===e.Sistema?"http://aire.nl.gob.mx/":"Sinaica"===e.Sistema?"https://sinaica.inecc.gob.mx/":"#"},isPurpleAir:"PurpleAir"===e.Sistema,labels:k.b.map((function(t){var a=t.name,c=t.label,n=t.units,s=a;return"PM25"===a&&"PurpleAir"===e.Sistema&&(s="PM25_Promedio"),{label:c||a,units:n,value:"number"===typeof e[s]?e[s]:"ND",status:e[s]?Object(G.c)(a,e[s]):99,ref:"#"}}))}}))}),[r,a]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(R,{onApply:function(e){var t=e.gas,c=e.location;if(c){var s=r.find((function(e){return e.Sensor_id===c.value}));if(s&&x([s.Latitud,s.Longitud]),t){var i=k.b.find((function(e){return e.name===t.value}));n(null!==i&&void 0!==i?i:a)}}else alert("Selecciona una ubicaci\xf3n")}}),Object(j.jsxs)("div",{className:"my-4",style:{zIndex:0,position:"relative",width:"100%",height:"500px"},children:[o&&Object(j.jsx)("div",{className:"position-absolute w-100 end-0 p-2",style:{zIndex:100},children:Object(j.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Ocurri\xf3 un error al cargar los datos."})}),i&&Object(j.jsx)("div",{className:"w-100 h-100 d-flex position-absolute",style:{zIndex:100,backgroundColor:"rgba(0,0,0,0.2)"},children:Object(j.jsx)("div",{className:"position-absolute top-50 start-50 translate-middle",children:Object(j.jsx)(ee.a,{animation:"border"})})}),Object(j.jsx)("div",{className:"w-100 h-100 position-absolute p-2",style:{zIndex:99,pointerEvents:"none"},children:Object(j.jsx)("div",{className:"position-absolute end-0",children:Object(j.jsx)(g.a,{trigger:"click",placement:"left",overlay:Object(j.jsxs)(te.a,{children:[Object(j.jsx)(te.a.Title,{as:"h3",children:"Leyenda"}),Object(j.jsxs)(te.a.Content,{children:[Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{style:{boxSizing:"border-box",borderRadius:"100%",width:"35px",height:"20px",marginRight:"0.75rem",padding:0,border:"1px solid black"}}),"Los sensores del estado se representan con un c\xedrculo"]}),Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{style:{boxSizing:"border-box",width:"35px",height:"20px",marginRight:"0.75rem",padding:0,border:"1px solid black"}}),"Los sensores de Purple Air se representan con un cuadrado"]})]})]}),children:Object(j.jsx)(y.a,{variant:"link",className:"pe-auto",children:"Leyenda"})})})}),Object(j.jsx)(B,Object(m.a)(Object(m.a)({whenCreated:O},ae),{},{children:!i&&f.map((function(e,t){return Object(j.jsx)(H,Object(m.a)(Object(m.a)({map:b},e),{},{label:e.current.label,indicator:e.current.indicator,status:e.current.status,shape:e.isPurpleAir?"square":"round"}),t)}))}))]}),Object(j.jsx)(h,{selected:G.a[p]})]})},ne=a(133),se=a(134),re=[{value:"PurpleAir",label:"PurpleAir",opt:"P"},{value:"AireNuevoLeon",label:"AireNuevoLeon/Sinaica",opt:"G"}];var ie=function(e){var t=e.createQueryGraph,a=e.createQueryCal,n=e.radioValue,s=e.setRadioValue,r=e.updateMainFiltros,i=Object(P.b)(),o=Object(P.c)((function(e){return e})),d=o.sensorDataLastUpdate,u=o.sensorData,b=Object(c.useState)(null),m=Object(l.a)(b,2),O=m[0],x=m[1],h=[];Object(c.useEffect)((function(){(d?z()().diff(d,"minutes"):999)>60?Z().then((function(e){i(W(e)),x(e)})).catch((function(e){return console.error(e)})):x(u)}),[]);var v=Object(c.useState)(""),g=Object(l.a)(v,2),N=g[0],S=g[1],C=Object(c.useState)(k.e),A=Object(l.a)(C,2),D=A[0],R=A[1],w=Object(c.useState)(null),_=Object(l.a)(w,2),I=_[0],L=_[1],Y=Object(c.useRef)(null),E=Object(c.useRef)(null),F=Object(c.useRef)(k.e[0]);return Object(c.useEffect)((function(){"PurpleAir"===N.value?R([k.e[0]]):R(k.e)}),[N]),O&&O.forEach((function(e){N.value!==e.Sistema||k.d.includes(e.Sensor_id)||h.push({value:e.Sensor_id,label:e.Zona})})),Object(j.jsxs)("div",{className:"mt-5",children:[Object(j.jsxs)("div",{className:"ta-center mb-5",children:[Object(j.jsx)("h2",{children:"Registro Hist\xf3rico"}),Object(j.jsx)("p",{children:"Consulta los datos hist\xf3ricos de la calidad del aire"})]}),Object(j.jsxs)(p.a,{children:[Object(j.jsxs)(p.a.Row,{className:"mb-3",children:[Object(j.jsx)(f.a,{xs:6,children:Object(j.jsx)(M.a,{options:re,placeholder:"Sistema",onChange:function(e){L(null),E.current=null,Y.current=e,S(e)}})}),Object(j.jsx)(f.a,{xs:6,children:Object(j.jsx)(M.a,{options:h,value:I,placeholder:"Ubicaci\xf3n",onChange:function(e){L(e),E.current=e}})})]}),Object(j.jsxs)(p.a.Row,{children:[Object(j.jsx)(f.a,{children:Object(j.jsx)(ne.a,{toggle:!0,children:[{name:"Grafica",value:"1"},{name:"Calendario",value:"2"}].map((function(e,t){return Object(j.jsx)(se.a,{className:"toggle-vista",type:"radio",variant:"light",name:"radio",value:e.value,checked:n===e.value,onChange:function(e){return s(e.currentTarget.value)},children:e.name},t)}))})}),Object(j.jsx)(f.a,{className:"mb-3",children:Object(j.jsx)(M.a,{options:D,placeholder:"Indicador",onChange:function(e){F.current=e},defaultValue:k.e[0]})}),Object(j.jsx)(f.a,{xs:12,sm:3,className:"mb-3",children:Object(j.jsx)(y.a,{className:"btn-aplicar",variant:"primary",block:!0,onClick:function(){return r(E.current,F.current,Y.current),void("1"===n?t():a())},children:"Aplicar"})})]})]}),Object(j.jsx)("hr",{className:"mt-2 mb-4"})]})},le=a(62),oe=a.n(le);var de=function(e){var t=e.setDesde,a=e.setHasta,n=e.setDesdeHora,s=e.setHastaHora,r=e.data,i=e.layout,l=e.downloadFile,o=e.summary;return Object(c.useEffect)((function(){t(null),a(null),n("00:00:00"),s("00:00:00")}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(p.a,{className:"mt-4 mb-4",children:Object(j.jsxs)(p.a.Row,{className:"d-flex justify-content-evenly",children:[Object(j.jsx)(f.a,{xs:12,lg:5,className:"mb-3",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{xs:2,children:Object(j.jsxs)(p.a.Label,{className:"col-form-label",children:["Desde:"," "]})}),Object(j.jsx)(f.a,{xs:5,children:Object(j.jsx)(p.a.Control,{type:"date",required:!0,onChange:function(e){return t(z()(e.target.value))}})}),Object(j.jsx)(f.a,{xs:5,children:Object(j.jsx)(p.a.Control,{onChange:function(e){return n(e.target.value+":00")},type:"time"})})]})}),Object(j.jsx)(f.a,{xs:12,lg:5,className:"mb-3",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{xs:2,children:Object(j.jsxs)(p.a.Label,{className:"col-form-label",children:["Hasta:"," "]})}),Object(j.jsx)(f.a,{xs:5,children:Object(j.jsx)(p.a.Control,{type:"date",required:!0,onChange:function(e){return a(z()(e.target.value))}})}),Object(j.jsx)(f.a,{xs:5,children:Object(j.jsx)(p.a.Control,{onChange:function(e){return s(e.target.value+":00")},type:"time"})})]})})]})}),Object(j.jsxs)(v.a,{className:"mb-5",children:[Object(j.jsxs)(f.a,{xs:12,lg:4,xl:2,children:[Object(j.jsx)(v.a,{xs:12,children:Object(j.jsx)(y.a,{className:"btn btn-light mb-4",block:!0,onClick:function(){l()},children:"Descargar datos"})}),Object(j.jsxs)(v.a,{className:"d-flex justify-content-center",children:[Object(j.jsx)(f.a,{xs:6,sm:5,lg:12,children:Object(j.jsxs)(v.a,{className:"dato-calculado d-flex justify-content-center",children:[Object(j.jsxs)(v.a,{sm:12,children:[Object(j.jsx)("p",{className:"tipo text-center",children:"M\xe1ximo"}),Object(j.jsx)("p",{className:"desc text-center",children:o&&(null===o||void 0===o?void 0:o.max.date)?"Registrado el ".concat(null===o||void 0===o?void 0:o.max.date):""})]}),Object(j.jsx)(v.a,{sm:12,className:"d-flex align-items-center justify-content-end",children:Object(j.jsx)("p",{className:"numero muymala text-center",children:o&&"number"===typeof(null===o||void 0===o?void 0:o.max.value)?o.max.value.toFixed(2):"-"})})]})}),Object(j.jsx)(f.a,{xs:6,sm:5,lg:12,children:Object(j.jsxs)(v.a,{className:"dato-calculado d-flex justify-content-center",children:[Object(j.jsxs)(v.a,{sm:12,children:[Object(j.jsx)("p",{className:"tipo text-center",children:"M\xednimo"}),Object(j.jsx)("p",{className:"desc text-center",children:o&&(null===o||void 0===o?void 0:o.min.date)?"Registrado el ".concat(null===o||void 0===o?void 0:o.min.date):""})]}),Object(j.jsx)(v.a,{sm:12,className:"d-flex align-items-center justify-content-end",children:Object(j.jsx)("p",{className:"numero acept text-center",children:o&&"number"===typeof(null===o||void 0===o?void 0:o.min.value)?o.min.value.toFixed(2):"-"})})]})}),Object(j.jsx)(f.a,{xs:6,sm:5,lg:12,children:Object(j.jsxs)(v.a,{className:"dato-calculado d-flex align-items-center justify-content-center",children:[Object(j.jsx)(v.a,{sm:12,children:Object(j.jsx)("p",{className:"tipo text-center",children:"Promedio"})}),Object(j.jsx)(v.a,{sm:12,className:"d-flex align-items-center justify-content-end",children:Object(j.jsx)("p",{className:"numero mala text-center",children:o&&"number"===typeof(null===o||void 0===o?void 0:o.avg.value)?o.avg.value.toFixed(2):"-"})})]})}),Object(j.jsx)(f.a,{xs:6,sm:5,lg:12,children:Object(j.jsxs)(v.a,{className:"dato-calculado d-flex align-items-center justify-content-center",children:[Object(j.jsx)(v.a,{sm:12,className:"d-flex align-items-center justify-content-center",children:Object(j.jsx)("p",{className:"tipo text-center",children:"Arriba de la norma"})}),Object(j.jsx)(v.a,{sm:12,className:"d-flex align-items-center justify-content-center",children:Object(j.jsx)("p",{className:"numero text-center ".concat(o?0===o.porcentajes.arribaLimite?"bueno":o.porcentajes.arribaLimite>25?"muymala":"mala":null),children:o?o.porcentajes.arribaLimite+"%":"-"})})]})}),Object(j.jsx)(f.a,{xs:12,sm:5,lg:12,children:Object(j.jsxs)(v.a,{className:"dato-calculado",children:[Object(j.jsxs)(f.a,{xs:6,sm:6,className:"d-flex flex-column align-items-center justify-content-center",children:[Object(j.jsx)("p",{className:"tipo text-center",children:"Datos V\xe1lidos"}),Object(j.jsx)("p",{className:"numero bueno text-center",children:o?o.porcentajes.buenos+"%":"-"})]}),Object(j.jsxs)(f.a,{xs:6,sm:6,className:"d-flex flex-column align-items-center justify-content-center",children:[Object(j.jsx)("p",{className:"tipo text-center",children:"Datos Nulos"}),Object(j.jsx)("p",{className:"numero muymala text-center",children:o?o.porcentajes.nulos+"%":"-"})]})]})})]})]}),Object(j.jsx)(f.a,{sm:12,lg:8,xl:10,children:Object(j.jsxs)("div",{className:"grafico mb-4",children:[r&&Object(j.jsx)(oe.a,{className:"grafico-resize",data:r,layout:i,config:{responsive:!0}}),"undefined"==typeof r&&Object(j.jsx)("div",{children:"Seleccionar un sensor, contaminante y fechas para ver sus datos"})]})}),Object(j.jsx)(v.a,{className:"d-block d-sm-none w-100",xs:11,children:Object(j.jsx)("p",{children:"*Para una mejor visualizaci\xf3n, utiliza el telefono horizontalmente."})})]})]})};a(73);z.a.locale("es");var je=Object(c.lazy)((function(){return Promise.all([a.e(3),a.e(4)]).then(a.bind(null,152))})),ue=Object(c.lazy)((function(){return Promise.all([a.e(5),a.e(6)]).then(a.bind(null,148))}));var be=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(null),r=Object(l.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)("1"),u=Object(l.a)(d,2),b=u[0],O=u[1],x=Object(c.useState)(null),h=Object(l.a)(x,2),p=h[0],f=h[1],v=Object(c.useState)(!1),g=Object(l.a)(v,2),N=g[0],y=g[1],C=Object(c.useState)(!1),P=Object(l.a)(C,2),M=P[0],A=P[1],D=Object(c.useState)(null),R=Object(l.a)(D,2),w=R[0],_=R[1],I=Object(c.useState)(null),L=Object(l.a)(I,2),Y=L[0],E=L[1],F=Object(c.useState)("00:00:00"),H=Object(l.a)(F,2),q=H[0],U=H[1],T=Object(c.useState)("00:00:00"),B=Object(l.a)(T,2),G=B[0],K=B[1],V=Object(c.useRef)({value:"PM25"}),Z=Object(c.useRef)(null),Q=Object(c.useRef)(null);function J(e,t){if(Z.current){e&&t||(e=w,t=Y);var a="ubic=";a+=Z.current.value,a+="&ind="+V.current.value+"&inicio="+e.format("YYYY-MM-DD")+"&fin="+t.format("YYYY-MM-DD"),f(a)}else alert("Selecciona una ubicaci\xf3n.")}function W(){var e=function(){if(p){var e="location=";return(e+=Z.current.value)+("2"===b?"&gas="+V.current.value+"&start_date="+w.startOf("month").format("YYYY-MM-DD")+"&end_date="+Y.endOf("month").format("YYYY-MM-DD"):"&gas="+V.current.value+"&start_date="+w.format("YYYY-MM-DD")+"&end_date="+Y.format("YYYY-MM-DD"))}return null}();e&&fetch("".concat(k.a,"/download-data?").concat(e)).then((function(e){return e.blob()})).then((function(e){var t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="data.csv";a.addEventListener("click",(function e(){setTimeout((function(){URL.revokeObjectURL(t),a.removeEventListener("click",e)}),150)}),!1),a.click()}))}return Object(c.useEffect)((function(){p&&("1"===b?fetch("".concat(k.a,"/get-graph-opt?").concat(p)).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&A(!0);var t=[];e.plot.data&&e.plot.data[0].x.forEach((function(e){var a=z.a.duration("05:00:00");e=z()(e).subtract(a).format(),t.push(e.split("-05:00")[0])})),e.plot.data[0].x=t,n(e.plot),o(e.summary),y(!1)})):fetch("".concat(k.a,"/datos-fecha?").concat(p)).then((function(e){return e.json()})).then((function(e){return n(e)})))}),[p]),Object(c.useEffect)((function(){n(null)}),[b]),Object(j.jsxs)("div",{className:"container mb-10",children:[Object(j.jsxs)(S.a,{show:M,onHide:function(){return A(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(S.a.Header,{closeButton:!0,children:Object(j.jsx)("h5",{children:"Datos no encontrados"})}),Object(j.jsx)(S.a.Body,{children:Object(j.jsx)("p",{children:"Revise los parametros e intente de nuevo."})})]}),Object(j.jsx)(ie,{createQueryGraph:function(){if(Z.current)if(w&&Y){y(!0);var e="location=".concat(Z.current.label,"&gas=").concat(V.current.value,"&system=").concat(Q.current.opt,"&start_date=").concat(z.a.utc(w).format("MM/DD/YYYY"),"/").concat(q,"&end_date=").concat(z.a.utc(Y).format("MM/DD/YYYY"),"/").concat(G);f(e)}else alert("Selecciona las fechas.");else alert("Selecciona una ubicaci\xf3n.")},createQueryCal:J,radioValue:b,setRadioValue:O,updateMainFiltros:function(e,t,a){Q.current=a,Z.current=e,V.current=t}}),Object(j.jsx)("div",{className:"text-center",children:Object(j.jsx)("img",{src:"loading.gif",alt:"Cargando...",className:"loading",style:N?{}:{display:"none"}})}),"1"===b&&Object(j.jsx)(de,Object(m.a)({setDesde:_,setHasta:E,setDesdeHora:U,setHastaHora:K,downloadFile:W,summary:i},a)),"2"===b&&Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(c.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading..."}),children:[Object(j.jsx)(je,{q:p,create:J,data:a,indi:V.current.value,setDesde:_,setHasta:E,downloadFile:W}),Object(j.jsx)(ue,{q:p,fecha:w,ubic:Z.current,ind:V.current.value})]})})]})},me=a(88),Oe=function(e){var t=Object(c.useRef)(e.id),a=e.sensores,n=Object(c.useState)("PurpleAir"),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(k.e),d=Object(l.a)(o,2),u=d[0],b=d[1],m=Object(c.useState)(null),O=Object(l.a)(m,2),x=O[0],h=O[1],g=Object(c.useRef)(a[0].zona?a[0].zona:null),N=Object(c.useRef)(k.e[0].value),y=Object(c.useRef)(null),S=Object(c.useRef)(null),C=Object(c.useRef)("00:00:00"),P=Object(c.useRef)("00:00:00");Object(c.useEffect)((function(){b("PurpleAir"===r?[k.e[0]]:k.e)}),[r]);var A=Object(c.useMemo)((function(){return a.filter((function(e){return e.sistema===r&&!k.d.includes(e.Sistema)})).map((function(e){return{value:e.sensor_id,label:e.zona}}))}),[a,r]);function D(){var a={ubic:g.current,ind:N.current,desde:y.current,hasta:S.current,desdeHora:C.current,hastaHora:P.current};e.modifyData(a,t.current)}return Object(j.jsx)(f.a,{sm:6,children:Object(j.jsx)("div",{className:"compara-filtros mt-2 mb-4",id:"filtro-"+t.current,children:Object(j.jsxs)(p.a,{children:[Object(j.jsx)(p.a.Group,{as:v.a,children:Object(j.jsx)(f.a,{sm:12,children:Object(j.jsxs)(v.a,{children:[Object(j.jsxs)(f.a,{sm:6,children:[Object(j.jsx)(M.a,{options:k.g,placeholder:"Sistema",className:"mb-2",onChange:function(e){i(e.value),h(null),g.current=null,D()}}),Object(j.jsx)(M.a,{options:A,value:x,placeholder:"Ubicaci\xf3n",className:"mb-2",onChange:function(e){h(e),g.current=e,D()}})]}),Object(j.jsx)(f.a,{sm:6,children:Object(j.jsx)(M.a,{options:u,defaultValue:k.e[0],onChange:function(e){N.current=e.value,D()}})})]})})}),Object(j.jsx)(p.a.Group,{as:v.a,children:Object(j.jsx)(f.a,{sm:12,children:Object(j.jsxs)(v.a,{children:[Object(j.jsxs)(f.a,{sm:6,children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{sm:3,children:Object(j.jsx)("p",{children:"Desde:"})}),Object(j.jsx)(f.a,{sm:9,children:Object(j.jsx)(p.a.Control,{className:"cf-input",type:"date",onChange:function(e){y.current=e.target.value,D()}})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{sm:3}),Object(j.jsx)(f.a,{sm:9,children:Object(j.jsx)(p.a.Control,{onChange:function(e){C.current=e.target.value+":00",D()},type:"time"})})]})]}),Object(j.jsxs)(f.a,{sm:6,children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{sm:3,children:Object(j.jsx)("p",{children:"Hasta:"})}),Object(j.jsx)(f.a,{sm:9,children:Object(j.jsx)(p.a.Control,{className:"cf-input",type:"date",onChange:function(e){S.current=e.target.value,D()}})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(f.a,{sm:3}),Object(j.jsx)(f.a,{sm:9,children:Object(j.jsx)(p.a.Control,{onChange:function(e){P.current=e.target.value+":00",D()},type:"time"})})]})]})]})})})]})})})};var xe=function(){var e=Object(P.b)(),t=Object(P.c)((function(e){return e})),a=t.sensorDataLastUpdate,n=t.sensorData,s=Object(c.useState)(null),r=Object(l.a)(s,2),i=r[0],o=r[1],d=[];Object(c.useEffect)((function(){(a?z()().diff(a,"minutes"):999)>60?Z().then((function(t){e(W(t)),o(t)})).catch((function(e){return console.error(e)})):o(n)}),[]),i&&i.forEach((function(e){d.push({sensor_id:e.Sensor_id,zona:e.Zona,sistema:e.Sistema})}));var u=Object(c.useRef)(-1),b=Object(c.useState)([]),O=Object(l.a)(b,2),x=O[0],h=O[1],p=Object(c.useRef)([]),g=Object(c.useState)(null),N=Object(l.a)(g,2),S=N[0],C=N[1],M=Object(c.useState)(!1),A=Object(l.a)(M,2),D=A[0],R=A[1];function w(e,t){p.current[t]=e}Object(c.useEffect)((function(){!function(){var e=[];if(S){for(var t=function(t){var a=d.find((function(e){return e.sensor_id===p.current[t].ubic.value})).zona,c="PM25"===p.current[t].ind?"PM2.5":p.current[t].ind;switch(K(c),c){case"PM2.5":Y(15);break;case"PM10":Y(45);break;case"O3":Y(.051);break;case"NO2":Y(.013);break;case"SO2":Y(.015);break;default:Y(null)}if(S[t].name="".concat(a," (").concat(c,")"),S[t].type="scatter",S[t].mode="lines",S[t].marker={color:V[t]},S[t].text=S[t].dia.map((function(e){return z.a.utc(new Date(e)).format("DD-MM-YYYY HH:mm:ss")})),S[t].hovertemplate="<i>Medida</i>: %{y:.4f}<br><b>%{text}</b>",e.push(S[t]),"PM2.5"===c||"PM10"===c){var n=Object(m.a)({},S[t]);n.name="".concat(a," (").concat(c,") Promedio movil 24h"),n.marker={color:Q[t]},n.y=n.moving_average,e.push(n);var s=Object(m.a)({},S[t]);s.name="".concat(a," (").concat(c,") Indice Aire y Salud"),s.marker={color:J[t]},s.y=s.ICAR,e.push(s)}else if("SO2"===c){var r=Object(m.a)({},S[t]);r.name="".concat(a," (").concat(c,") Promedio movil 24h"),r.marker={color:Q[t]},r.y=r.moving_average,e.push(r)}else if("CO"===c){var i=Object(m.a)({},S[t]);i.name="".concat(a," (").concat(c,") Promedio movil 8h"),i.marker={color:Q[t]},i.y=i.moving_average,e.push(i)}},a=0;a<S.length;a++)t(a);U(e)}}()}),[S]);var _=Object(c.useState)(null),I=Object(l.a)(_,2),L=I[0],Y=I[1],E={title:{text:"Compara datos"},showlegend:!0,hovermode:"closest",width:1e3,height:700},F=Object(c.useState)([]),H=Object(l.a)(F,2),q=H[0],U=H[1],T=Object(c.useState)(null),B=Object(l.a)(T,2),G=B[0],K=B[1],V=["red","green","blue","orange"],Q=["purple","pink","black","cyan"],J=["orange","brown","grey","maroon"];return Object(j.jsxs)("div",{className:"container mt-5",children:[Object(j.jsxs)("div",{className:"ta-center mb-5",children:[Object(j.jsx)("h2",{children:"Compara datos"}),Object(j.jsx)("p",{children:"Compara la calidad del aire en diferente lugar y tiempo"})]}),Object(j.jsx)("hr",{className:"mb-4"}),Object(j.jsx)(v.a,{className:"mt-2 mb-1 d-flex justify-content-center",id:"filtros",children:x}),Object(j.jsx)(v.a,{className:"d-flex justify-content-end",children:Object(j.jsxs)(f.a,{sm:6,className:"d-flex justify-content-between",children:[Object(j.jsx)(y.a,{onClick:function(){u.current<3&&(u.current=u.current+1,h([].concat(Object(me.a)(x),[Object(j.jsx)(Oe,{id:u.current,modifyData:w,sensores:d})])))},children:"Agregar un filtro"}),Object(j.jsx)(y.a,{onClick:function(){return function(){if(-1!=u.current){var e=document.getElementById("filtro-".concat(u.current)).parentNode;e.parentNode.removeChild(e),u.current=u.current-1}}()},children:"Eliminar un filtro"}),Object(j.jsx)(y.a,{onClick:function(){return function(){if(!(u.current<0)){for(var e="",t="",a="",c="",n=0;n<=u.current;n++){if(!(p.current[n]&&p.current[n].desde&&p.current[n].hasta))return void alert("Selecciona las fechas");e+=p.current[n].ubic.label+",",t+=p.current[n].ind+",",a+=p.current[n].desde+"/"+p.current[n].desdeHora+",",c+=p.current[n].hasta+"/"+p.current[n].hastaHora+","}e=e.slice(0,-1),t=t.slice(0,-1),a=a.slice(0,-1),c=c.slice(0,-1);var s="ubic=".concat(e,"&ind=").concat(t,"&inicio=").concat(a,"&fin=").concat(c);R(!0),fetch("".concat(k.a,"/compare?").concat(s)).then((function(e){return e.json()})).then((function(e){R(!1),C(e)}))}}()},children:"Generar gr\xe1fica"})]})}),Object(j.jsx)(v.a,{children:Object(j.jsxs)(f.a,{sm:12,children:[Object(j.jsx)("div",{className:"text-center",children:Object(j.jsx)("img",{src:"loading.gif",alt:"Cargando...",className:"loading",style:D?{}:{display:"none"}})}),Object(j.jsx)("div",{class:"grafico-compara mt-5",children:Object(j.jsx)(oe.a,{data:q,layout:S?Object(m.a)(Object(m.a)({},E),{},{shapes:function(){var e,t,a,c,n,s,r,i,l,o;switch(G){case"PM2.5":e=0,t=25,a=25,c=45,n=45,s=79,r=79,i=147,l=147,o=172;break;case"PM10":e=0,t=50,a=50,c=75,n=75,s=155,r=155,i=235,l=235,o=255;break;case"O3":e=0,t=.051,a=.051,c=.07,n=.07,s=.092,r=.092,i=.114,l=.114,o=.139;break;case"CO":e=0,t=8.75,a=8.75,c=11,n=11,s=13.3,r=13.3,i=15.5,l=15.5,o=17.5;break;case"NO2":e=0,t=.107,a=.107,c=.21,n=.21,s=.23,r=.23,i=.25,l=.25,o=.275;break;case"SO2":e=0,t=.008,a=.008,c=.11,n=.11,s=.165,r=.165,i=.22,l=.22,o=.255;break;default:e=0,t=25,a=25,c=45,n=45,s=79,r=79,i=147,l=147,o=172}return[{type:"rect",xref:"paper",x0:0,y0:e,x1:1,y1:t,fillcolor:"rgb(0, 228, 0)",opacity:.3,line:{width:0}},{type:"rect",xref:"paper",x0:0,y0:a,x1:1,y1:c,fillcolor:"rgb(255, 255, 0)",opacity:.3,line:{width:0}},{type:"rect",xref:"paper",x0:0,y0:n,x1:1,y1:s,fillcolor:"rgb(255, 126, 0)",opacity:.3,line:{width:0}},{type:"rect",xref:"paper",x0:0,y0:r,x1:1,y1:i,fillcolor:"rgb(255, 0, 0)",opacity:.3,line:{width:0}},{type:"rect",xref:"paper",x0:0,y0:l,x1:1,y1:o,fillcolor:"rgb(143, 63, 151)",opacity:.3,line:{width:0}},{type:"line",xref:"paper",x0:0,y0:L,x1:1,y1:L,line:{color:"#4682b4",width:2,dash:"dash"}}]}(),annotations:[{xref:"paper",x:1.01,y:L,xanchor:"left",yanchor:"middle",text:"L\xedmite recomendado <br>por la OMS 24h",showarrow:!1,font:{family:"Arial",size:12,color:"white"},bgcolor:"#4682b4"}]}):Object(m.a)({},E)})})]})})]})};var he=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(r.a,{children:[Object(j.jsx)(u,{}),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:ce}),Object(j.jsx)(i.a,{exact:!0,path:"/registro",component:be}),Object(j.jsx)(i.a,{exact:!0,path:"/compara",component:xe})]}),Object(j.jsx)(b,{})]})})},pe=function(e){e&&e instanceof Function&&a.e(7).then(a.bind(null,149)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},fe=a(16),ve=a(72),ge=a(85),Ne=a.n(ge),ye=Object(ve.a)({key:"root",storage:Ne.a},X),Se=a(86),Ce=function(){var e=Object(fe.e)(ye);return{store:e,persistor:Object(ve.b)(e)}}(),Pe=Ce.store,Me=Ce.persistor;s.a.render(Object(j.jsx)(P.a,{store:Pe,children:Object(j.jsx)(Se.a,{loading:null,persistor:Me,children:Object(j.jsx)(r.a,{children:Object(j.jsx)(he,{})})})}),document.getElementById("root")),pe()},46:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s}));var c={"Aire y Salud":{PM10:[50,75,155,235],PM25:[25,45,78,147],O3:[.051,.095,.135,.175],CO:[8.75,11,13.3,15.5],SO2:[.008,.11,.165,.22],NO2:[.107,.21,.23,.25]},NOM:{PM10:[100,135,214,300],PM25:[55,75,97.4,128.8],O3:[.07,.093,.115,.137],CO:[12,13.9,15.9,18.9],SO2:[.253,.345,.435,.566],NO2:[.132,.176,.221,.289]}},n=["buena","acept","mala","muy","ext"],s=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Aire y Salud",n=c[a][e],s=n.length-1;s>=0;s--)if(t>n[s])return parseInt(s)+1;return 0}},9:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"g",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"h",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return d}));var c=[{name:"PM25",label:"PM2.5",units:"\u03bcg/m3"},{name:"PM10",units:"\u03bcg/m3"},{name:"O3",units:"ppm"},{name:"CO",units:"ppm"},{name:"NO2",units:"ppm"},{name:"SO2",units:"ppm"}],n=[{value:"PurpleAir",label:"PurpleAir",opt:"P"},{value:"Sinaica",label:"Sinaica",opt:"G"},{value:"AireNuevoLeon",label:"AireNuevoLeon",opt:"G"}],s=[{value:"PM25",label:"PM2.5"},{value:"PM10",label:"PM10"},{value:"O3",label:"O3"},{value:"CO",label:"CO"},{value:"NO2",label:"NO2"},{value:"SO2",label:"SO2"}],r={PM25:"\xb5g/m3",PM10:"\xb5g/m3",CO:"ppm",O3:"ppm",NO2:"ppm",SO2:"ppm"},i=["P36757","P47305","P39499","P46239","P50855","P35099","P39709","P39497","P39285","P39355"],l=["P39497","P39285","P39355"],o=["Sinaica"],d="/api"},96:function(e,t,a){},97:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.f618f2b4.chunk.js.map