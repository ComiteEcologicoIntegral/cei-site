{"version":3,"sources":["components/DatePicker.js","components/buildCalendar.js","components/Calendario.js"],"names":["DatePicker","value","onChange","useState","calendar","setCalendar","afterToday","day","isAfter","Date","dayStyles","isSame","isSelected","isToday","sameMonth","prevMonth","clone","subtract","nextMonth","endOf","add","currMonth","isFirstMonthRegistered","useEffect","startDay","startOf","endDay","isBefore","push","Array","fill","map","buildCalendar","className","Row","Col","sm","onClick","String","fromCharCode","format","d","i","week","w","v4","moment","locale","unidad","PM25","PM10","CO","O3","NO2","SO2","meses","label","anios","Calendario","q","create","data","indi","setDesde","setHasta","downloadFile","colorIndice","medida","getStatus","setValue","getMonth","inMes","setInMes","length","inAnio","setInAnio","f","dataCol1","dataCol2","index","currHour","ch","toString","padStart","info","firstIndex","includes","Accordion","id","registros_id","Card","Header","Toggle","as","Button","variant","eventKey","color","Collapse","Body","lg","block","options","placeholder","target","defaultValue"],"mappings":"mNAkHeA,EA5GI,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAAe,EASRC,mBAAS,IATD,mBASjCC,EATiC,KASvBC,EATuB,KAqBxC,SAASC,EAAWC,GAChB,OAAOA,EAAIC,QAAQ,IAAIC,KAAQ,OAWnC,SAASC,EAAUH,GACf,OAjBJ,SAAoBA,GAChB,OAAON,EAAMU,OAAOJ,EAAK,OAgBrBK,CAAWL,GAAa,WAThC,SAAiBA,GACb,OAAOA,EAAII,OAAO,IAAIF,KAAQ,OAS1BI,CAAQN,GAAa,QACrBD,EAAWC,GAAa,QAPhC,SAAmBA,GACf,OAAOA,EAAII,OAAOV,EAAO,SAOpBa,CAAUP,GACR,GADqB,QAYhC,SAASQ,IACL,OAAOd,EAAMe,QAAQC,SAAS,EAAG,SAGrC,SAASC,IACL,OAAOjB,EAAMe,QAAQG,MAAM,SAASC,IAAI,EAAG,OAG/C,SAASC,IACL,OAAOpB,EAAMU,OAAO,IAAIF,KAAQ,SAGpC,SAASa,IACL,OAAOrB,EAAMU,OAAO,IAAIF,KAAK,cAAe,SAGhD,OApDAc,qBAAU,WACNlB,ECpBO,SAAuBJ,GASlC,IAPA,IAAMuB,EAAWvB,EAAMe,QAAQS,QAAQ,SAASA,QAAQ,WAClDC,EAASzB,EAAMe,QAAQG,MAAM,SAASA,MAAM,WAAWF,SAAS,EAAG,OAEnEV,EAAMiB,EAASR,QAAQC,SAAS,EAAG,OACnCb,EAAW,GAGVG,EAAIoB,SAASD,EAAQ,QACxBtB,EAASwB,KACLC,MAAM,GAAGC,KAAK,GAAGC,KAAI,kBAAMxB,EAAIa,IAAI,EAAG,OAAOJ,YAIrD,OAAOZ,EDKS4B,CAAc/B,MAC3B,CAACA,IAmDA,sBAAKgC,UAAU,gBAAf,UACI,qBAAKA,UAAU,aAAf,SACI,eAACC,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAKC,GAAI,EAAGH,UAAU,WAAWI,QAAS,kBAAOf,KAA4BpB,EAASa,IAAtF,SACMO,IAAsD,KAA3BgB,OAAOC,aAAa,OAErD,eAACJ,EAAA,EAAD,CAAKC,GAAI,EAAGH,UAAU,UAAtB,UA9BLhC,EAAMuC,OAAO,OA8BR,KA1BLvC,EAAMuC,OAAO,WA6BR,cAACL,EAAA,EAAD,CAAKC,GAAI,EAAGH,UAAU,OAAOI,QAAS,kBAAOhB,KAAenB,EAASgB,IAArE,SACMG,IAAyC,KAA3BiB,OAAOC,aAAa,YAIhD,sBAAKN,UAAU,OAAf,UACI,qBAAKA,UAAU,YAAf,SAEQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKF,KAAI,SAACU,EAAGC,GAAJ,OACpC,qBAAKT,UAAU,UAAf,SAAkCQ,GAAJC,QAKtCtC,EAAS2B,KAAI,SAACY,EAAMC,GAAP,OACT,8BAEQD,EAAKZ,KAAI,SAACxB,EAAKmC,GAAN,OAAY,qBAAKT,UAAU,MAChCI,QAAS,kBAAO/B,EAAWC,IAAQL,EAASK,IAD3B,SAEjB,qBAAK0B,UAAWvB,EAAUH,GAA1B,SACKA,EAAIiC,OAAO,MADqBK,qBAJvCD,a,gDEtFlCE,IAAOC,OAAO,MAEd,IAAMC,EAAS,CACXC,KAAM,WACNC,KAAM,WACNC,GAAI,MACJC,GAAI,MACJC,IAAK,MACLC,IAAK,OAIHC,EAAQ,CACV,CAAEtD,MAAO,IAAKuD,MAAO,SACrB,CAAEvD,MAAO,IAAKuD,MAAO,WACrB,CAAEvD,MAAO,IAAKuD,MAAO,SACrB,CAAEvD,MAAO,IAAKuD,MAAO,SACrB,CAAEvD,MAAO,IAAKuD,MAAO,QACrB,CAAEvD,MAAO,IAAKuD,MAAO,SACrB,CAAEvD,MAAO,IAAKuD,MAAO,SACrB,CAAEvD,MAAO,IAAKuD,MAAO,UACrB,CAAEvD,MAAO,IAAKuD,MAAO,cACrB,CAAEvD,MAAO,KAAMuD,MAAO,WACtB,CAAEvD,MAAO,KAAMuD,MAAO,aACtB,CAAEvD,MAAO,KAAMuD,MAAO,cAGpBC,EAAQ,CACV,CAAExD,MAAO,OAAQuD,MAAO,QACxB,CAAEvD,MAAO,OAAQuD,MAAO,QACxB,CAAEvD,MAAO,OAAQuD,MAAO,QACxB,CAAEvD,MAAO,OAAQuD,MAAO,SA6LbE,UAzLf,YAAkF,IAA5DC,EAA2D,EAA3DA,EAAGC,EAAwD,EAAxDA,OAAQC,EAAgD,EAAhDA,KAAMC,EAA0C,EAA1CA,KAAMC,EAAoC,EAApCA,SAAUC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,aAc7D,SAASC,EAAYC,GAGjB,OAFUC,YAAUN,EAAMK,IAGtB,KAAK,EACD,MAAO,QACX,KAAK,EACD,MAAO,QACX,KAAK,EACD,MAAO,OACX,KAAK,EACD,MAAO,UACX,KAAK,EACD,MAAO,UACX,QACI,MAAO,WA7B0D,MAiCnDhE,mBAAS2C,OAjC0C,mBAiCtE7C,EAjCsE,KAiC/DoE,EAjC+D,KAoC7E9C,qBAAU,WACNwC,EAAS9D,GACT+D,EAAS/D,KACV,IAvC0E,MA0CnDE,oBAAS,IAAIM,MAAO6D,WAAa,GA1CkB,mBA0CtEC,EA1CsE,KA0C/DC,EA1C+D,OA2CjDrE,mBAASsD,EAAMA,EAAMgB,OAAS,GAAGxE,OA3CgB,mBA2CtEyE,EA3CsE,KA2C9DC,EA3C8D,KA6C7EpD,qBAAU,WACNwC,EAAS9D,GACT+D,EAAS/D,IACL4D,GAAQF,IACRC,EAAO3D,EAAOA,KAEnB,CAACA,IAEJsB,qBAAU,WACN,IAAIqD,EAAI,IAAInE,KAAJ,UAAY8D,EAAZ,YAAqBtE,EAAMe,QAAQwB,OAAO,MAA1C,YAAmDkC,IAC3DL,EAASvB,IAAO8B,MACjB,CAACL,EAAOG,IAGX,IAAIG,EAAW,GACXC,EAAW,GACXC,EAAQ,EACRC,EAAW,EAEf,GAAInB,GAAwB,IAAhBA,EAAKY,OAAc,CAE3B,KAAOO,EAAW,IAAMD,EAAQlB,EAAKY,QAAQ,CAOzC,IANA,IAAIQ,EAAK,IAAMD,EAASE,WAAWC,SAAS,EAAG,GAAK,IAChDC,EAAO,GAEPC,EAAaN,EAGVA,EAAQlB,EAAKY,QAAUZ,EAAKkB,GAAL,IAAmBO,SAASL,IAEtDG,EAAKxD,KAAK,8BAAG,cAAC,IAAD,CAAmBK,UAAWiC,EAAYL,EAAKkB,GAAOjB,MAAWD,EAAKkB,GAAL,KAApE,KAA2FlB,EAAKkB,GAAOjB,GAAZ,WAAwBD,EAAKkB,GAAOjB,GAApC,YAA6Cd,EAAOc,IAAU,uBACnKiB,IAGJF,EAASjD,KACL,cAAC2D,EAAA,EAAD,CAA+CC,GAAI3B,EAAKwB,GAAYI,aAApE,SACI,eAACC,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,UACI,eAACJ,EAAA,EAAUK,OAAX,CAAkBC,GAAIC,IAAQ7D,UAAU,OACpC8D,QAAQ,OACRC,SAAUnC,EAAKwB,GAAYI,aAF/B,UAGI,cAAC,IAAD,CAAiBQ,MAAM,cAH3B,IAG2CjB,EAASE,WAAWC,SAAS,EAAG,GAH3E,WAMJ,cAACI,EAAA,EAAUW,SAAX,CAAoBF,SAAUnC,EAAKwB,GAAYI,aAA/C,SACI,cAACC,EAAA,EAAKS,KAAN,UACKf,UAXDvB,EAAKwB,GAAYI,eAkBrCT,IAIJ,KAAOA,EAAW,IAAMD,EAAQlB,EAAKY,QAAQ,CAMzC,IALA,IAAIQ,EAAK,IAAMD,EAASE,WAAWC,SAAS,EAAG,GAC3CC,EAAO,GAEPC,EAAaN,EAEVA,EAAQlB,EAAKY,QAAUZ,EAAKkB,GAAL,IAAmBO,SAASL,IACtDG,EAAKxD,KAAK,8BAAG,cAAC,IAAD,CAAmBK,UAAWiC,EAAYL,EAAKkB,GAAOjB,MAAzD,IAAqED,EAAKkB,GAAL,KAArE,KAA4FlB,EAAKkB,GAAOjB,GAAZ,UAAuBD,EAAKkB,GAAOjB,GAAnC,YAA4Cd,EAAOc,IAAU,sBACnKiB,IAGJD,EAASlD,KACL,cAAC2D,EAAA,EAAD,CAA+CC,GAAI3B,EAAKwB,GAAYI,aAApE,SACI,eAACC,EAAA,EAAD,WACI,cAACA,EAAA,EAAKC,OAAN,UACI,eAACJ,EAAA,EAAUK,OAAX,CAAkBC,GAAIC,IAAQ7D,UAAU,OACpC8D,QAAQ,OACRC,SAAUnC,EAAKwB,GAAYI,aAF/B,UAGI,cAAC,IAAD,CAAiBQ,MAAM,cAH3B,IAG2CjB,EAASE,WAAWC,SAAS,EAAG,GAH3E,WAMJ,cAACI,EAAA,EAAUW,SAAX,CAAoBF,SAAUnC,EAAKwB,GAAYI,aAA/C,SACI,cAACC,EAAA,EAAKS,KAAN,UACKf,UAXDvB,EAAKwB,GAAYI,eAkBrCT,UAGJH,EAASjD,KAAK,+DAIlB,OACI,qBAAKK,UAAU,kBAAf,SAEI,eAACC,EAAA,EAAD,CAAKD,UAAU,OAAf,UACI,cAACE,EAAA,EAAD,CAAKC,GAAI,GAAIgE,GAAI,EAAjB,SACI,gCACI,cAACN,EAAA,EAAD,CAAQ7D,UAAU,0BAA0BoE,OAAK,EAAChE,QAAS4B,EAA3D,qCACA,eAAC/B,EAAA,EAAD,CAAKD,UAAU,OAAf,UACI,cAACE,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,cAAC,IAAD,CACIkE,QAAS/C,EACTgD,YAAa,MACbrG,SAAU,SAACsG,GAAD,OAAYhC,EAASgC,EAAOvG,QACtCwG,aAAclD,GAAM,IAAI9C,MAAO6D,gBAGvC,cAACnC,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,cAAC,IAAD,CACIkE,QAAS7C,EACT8C,YAAa,SACbrG,SAAU,SAACsG,GAAD,OAAY7B,EAAU6B,EAAOvG,QACvCwG,aAAchD,EAAMA,EAAMgB,OAAS,UAI/C,sBAAKxC,UAAU,WAAf,UACI,+BAAKhC,GAASA,EAAMuC,OAAO,cAA3B,uBACA,eAACN,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,SACKyC,IAEL,cAAC1C,EAAA,EAAD,CAAKC,GAAI,EAAT,SACK0C,eAMrB,cAAC3C,EAAA,EAAD,CAAKC,GAAI,GAAIgE,GAAI,EAAGnE,UAAU,kDAA9B,SACI,cAAC,EAAD,CAAYhC,MAAOA,EAAOC,SAAUmE","file":"static/js/4.8dd62699.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport buildCalendar from './buildCalendar';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { v4 } from 'uuid';\r\n\r\n// Componente para el calendario en la página de Registro Histórico\r\nconst DatePicker = ({ value, onChange }) => {\r\n    /* \r\n        Se siguió este tutorial : https://youtu.be/5jRrVqRWqsM\r\n\r\n        Parámetros:\r\n            - value: día seleccionado\r\n            - onChange: función para cambiar el State de value\r\n    */\r\n\r\n    const [calendar, setCalendar] = useState([]);\r\n\r\n    // build calendar\r\n\r\n    useEffect(() => {\r\n        setCalendar(buildCalendar(value));\r\n    }, [value]);\r\n\r\n    function isSelected(day) {\r\n        return value.isSame(day, \"day\");\r\n    }\r\n\r\n    function afterToday(day) {\r\n        return day.isAfter(new Date(), \"day\");\r\n    }\r\n\r\n    function isToday(day) {\r\n        return day.isSame(new Date(), \"day\");\r\n    }\r\n\r\n    function sameMonth(day) {\r\n        return day.isSame(value, \"month\");\r\n    }\r\n\r\n    function dayStyles(day) {\r\n        if (isSelected(day)) return \"selected\"\r\n        if (isToday(day)) return \"today\"\r\n        if (afterToday(day)) return \"after\"\r\n        if (!sameMonth(day)) return \"month\"\r\n        return \"\"\r\n    }\r\n\r\n    function currMonthName() {\r\n        return value.format(\"MMM\")\r\n    }\r\n\r\n    function currYear() {\r\n        return value.format(\"YYYY\")\r\n    }\r\n\r\n    function prevMonth() {\r\n        return value.clone().subtract(1, \"month\")\r\n    }\r\n\r\n    function nextMonth() {\r\n        return value.clone().endOf(\"month\").add(1, \"day\")\r\n    }\r\n\r\n    function currMonth() {\r\n        return value.isSame(new Date(), \"month\")\r\n    }\r\n\r\n    function isFirstMonthRegistered() {\r\n        return value.isSame(new Date(\"01-01-2018\"), \"month\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"calendar mt-5\">\r\n            <div className=\"cal-header\">\r\n                <Row>\r\n                    <Col sm={3} className=\"previous\" onClick={() => !isFirstMonthRegistered() && onChange(prevMonth)}>\r\n                        {!isFirstMonthRegistered() ? String.fromCharCode(171) : null}\r\n                    </Col>\r\n                    <Col sm={6} className=\"current\">\r\n                        {currMonthName()}, {currYear()}\r\n                    </Col>\r\n                    <Col sm={3} className=\"next\" onClick={() => !currMonth() && onChange(nextMonth)}>\r\n                        {!currMonth() ? String.fromCharCode(187) : null}\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n            <div className=\"body\">\r\n                <div className=\"day-names\">\r\n                    {\r\n                        [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"].map((d, i) =>\r\n                            <div className=\"weekday\" key={i}>{d}</div>\r\n                        )\r\n                    }\r\n                </div>\r\n                {\r\n                    calendar.map((week, w) =>\r\n                        <div key={w}>\r\n                            {\r\n                                week.map((day, i) => <div className=\"day\"\r\n                                    onClick={() => !afterToday(day) && onChange(day)}>\r\n                                    <div className={dayStyles(day)} key={v4()}>\r\n                                        {day.format(\"D\")}\r\n                                    </div>\r\n                                </div>\r\n                                )\r\n                            }\r\n\r\n                        </div>)\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DatePicker\r\n","export default function buildCalendar(value) {\r\n    // Función para ayudar a construir el DatePicker\r\n    const startDay = value.clone().startOf(\"month\").startOf(\"isoWeek\"); // primer domingo antes del primero del mes\r\n    const endDay = value.clone().endOf(\"month\").endOf(\"isoWeek\").subtract(1, \"day\"); // último sábado después del fin de mes\r\n\r\n    const day = startDay.clone().subtract(2, \"day\");\r\n    const calendar = [];\r\n\r\n    // Crea las semanas del calendario\r\n    while (day.isBefore(endDay, \"day\")) {\r\n        calendar.push(\r\n            Array(7).fill(0).map(() => day.add(1, \"day\").clone())\r\n        )\r\n    }\r\n\r\n    return calendar;\r\n}","import React, { useState, useEffect } from 'react'\r\nimport '../styles/calendario.css';\r\nimport { Button, Col, Row, Accordion, Card } from 'react-bootstrap'\r\nimport DatePicker from './DatePicker'\r\nimport { AiFillCaretDown, AiFillRightSquare } from \"react-icons/ai\";\r\nimport { getStatus } from '../handlers/statusCriteria';\r\nimport Select from 'react-select';\r\nimport moment from 'moment'\r\nimport 'moment/locale/es';\r\n\r\nmoment.locale('es');\r\n\r\nconst unidad = {\r\n    PM25: \"µg/m3\",\r\n    PM10: \"µg/m3\",\r\n    CO: \"ppm\",\r\n    O3: \"ppm\",\r\n    NO2: \"ppm\",\r\n    SO2: \"ppm\"\r\n}\r\n\r\n// Valores para los dropdowns:\r\nconst meses = [\r\n    { value: '1', label: 'enero' },\r\n    { value: '2', label: 'febrero' },\r\n    { value: '3', label: 'marzo' },\r\n    { value: '4', label: 'abril' },\r\n    { value: '5', label: 'mayo' },\r\n    { value: '6', label: 'junio' },\r\n    { value: '7', label: 'julio' },\r\n    { value: '8', label: 'agosto' },\r\n    { value: '9', label: 'septiembre' },\r\n    { value: '10', label: 'octubre' },\r\n    { value: '11', label: 'noviembre' },\r\n    { value: '12', label: 'diciembre' }\r\n]\r\n\r\nconst anios = [\r\n    { value: '2018', label: '2018' },\r\n    { value: '2019', label: '2019' },\r\n    { value: '2020', label: '2020' },\r\n    { value: '2021', label: '2021' },\r\n]\r\n\r\n// Componente para la página de Registro Histórico\r\nfunction Calendario({ q, create, data, indi, setDesde, setHasta, downloadFile }) {\r\n    /* \r\n        Parámetros:\r\n            - q : query creado en los filtros\r\n            - create: función para crear query\r\n            - data: datos para mostrar en el desglose de horas\r\n            - indi: gas seleccionado en los filtros\r\n            - setDesde: función para cambiar el State de la fecha de inicio para pedir los datos\r\n            - setHasta: función para cambiar el State de la fecha fin\r\n            - downloadFile: función para descargar los datos mostrados\r\n    */\r\n\r\n    // Función para obtener la clase a la que pertenece según la medida\r\n    // Dicha clase es para darle el color según el nivel de riesgo \r\n    function colorIndice(medida) {\r\n        let val = getStatus(indi, medida);\r\n\r\n        switch (val) {\r\n            case 0:\r\n                return \"bueno\";\r\n            case 1:\r\n                return \"acept\";\r\n            case 2:\r\n                return \"mala\";\r\n            case 3:\r\n                return \"muymala\";\r\n            case 4:\r\n                return \"extmala\";\r\n            default:\r\n                return \"no-data\";\r\n        }\r\n    }\r\n\r\n    const [value, setValue] = useState(moment()); // Valor del día que está seleccionado en el calendario, se inicializa con el dia actual\r\n\r\n    // Para resetear los valores si es que fueron utilizados en la sección de la gráfica:\r\n    useEffect(() => {\r\n        setDesde(value);\r\n        setHasta(value);\r\n    }, []);\r\n\r\n    // Valores de los dropdowns para navegar más rápido a otra fecha, inicializados con la fecha actual\r\n    const [inMes, setInMes] = useState(new Date().getMonth() + 1);\r\n    const [inAnio, setInAnio] = useState(anios[anios.length - 1].value);\r\n\r\n    useEffect(() => {\r\n        setDesde(value);\r\n        setHasta(value);\r\n        if (data || q) { // Solo se crea y ejecuta el query si ya se ha dado click en el botón Aplicar\r\n            create(value, value);\r\n        }\r\n    }, [value]); // Cada que cambia el dia seleccionado, se actualizan los datos para crear el query\r\n\r\n    useEffect(() => {\r\n        let f = new Date(`${inMes}/${value.clone().format('DD')}/${inAnio}`); // Nos colocamos en el primer dia del mes para evitar que al moverte al siguiente mes, se coloque en un día futuro o inexistente\r\n        setValue(moment(f));\r\n    }, [inMes, inAnio]); // Cada que cambia un valor de los dropdowns, cambiamos el valor del día seleccionado\r\n\r\n    // Cuando ya se hizo el fetch para traer datos:\r\n    let dataCol1 = [];\r\n    let dataCol2 = [];\r\n    let index = 0;\r\n    let currHour = 0;\r\n\r\n    if (data && data.length !== 0) {\r\n        // Primera columna (horas de 00:00 a 11:00)\r\n        while (currHour < 12 && index < data.length) {\r\n            let ch = \"T\" + currHour.toString().padStart(2, 0) + \":\";\r\n            let info = [];\r\n\r\n            let firstIndex = index;\r\n\r\n            // Junta los datos de la misma hora aunque sean de diferente sensor para ponerlos en un mismo acordión\r\n            while (index < data.length && data[index][\"dia\"].includes(ch)) {\r\n                // Se crea un p tag con un bullet de color, ubicación, medida registrada y unidad\r\n                info.push(<p><AiFillRightSquare className={colorIndice(data[index][indi])} />{data[index][\"zona\"]}: {data[index][indi] ? ` ${data[index][indi]} ${unidad[indi]}` : \" No hay registro\"}</p>);\r\n                index++;\r\n            }\r\n\r\n            dataCol1.push(\r\n                <Accordion key={data[firstIndex].registros_id} id={data[firstIndex].registros_id}>\r\n                    <Card>\r\n                        <Card.Header>\r\n                            <Accordion.Toggle as={Button} className=\"hora\"\r\n                                variant=\"link\"\r\n                                eventKey={data[firstIndex].registros_id}>\r\n                                <AiFillCaretDown color=\"lightgray\" /> {currHour.toString().padStart(2, 0)}:00\r\n                            </Accordion.Toggle>\r\n                        </Card.Header>\r\n                        <Accordion.Collapse eventKey={data[firstIndex].registros_id}>\r\n                            <Card.Body>\r\n                                {info}\r\n                            </Card.Body>\r\n                        </Accordion.Collapse>\r\n                    </Card>\r\n                </Accordion>\r\n            )\r\n\r\n            currHour++;\r\n        }\r\n\r\n        // Segunda columna (horas de 12:00 a 23:00)\r\n        while (currHour < 24 && index < data.length) {\r\n            let ch = \"T\" + currHour.toString().padStart(2, 0);\r\n            let info = [];\r\n\r\n            let firstIndex = index; // Esta variable sirve para darle un key a cada acordión, sin pasarnos del último índice\r\n\r\n            while (index < data.length && data[index][\"dia\"].includes(ch)) {\r\n                info.push(<p><AiFillRightSquare className={colorIndice(data[index][indi])} /> {data[index][\"zona\"]}: {data[index][indi] ? `${data[index][indi]} ${unidad[indi]}` : \"No hay registro\"}</p>);\r\n                index++;\r\n            }\r\n\r\n            dataCol2.push(\r\n                <Accordion key={data[firstIndex].registros_id} id={data[firstIndex].registros_id}>\r\n                    <Card>\r\n                        <Card.Header>\r\n                            <Accordion.Toggle as={Button} className=\"hora\"\r\n                                variant=\"link\"\r\n                                eventKey={data[firstIndex].registros_id}>\r\n                                <AiFillCaretDown color=\"lightgray\" /> {currHour.toString().padStart(2, 0)}:00\r\n                            </Accordion.Toggle>\r\n                        </Card.Header>\r\n                        <Accordion.Collapse eventKey={data[firstIndex].registros_id}>\r\n                            <Card.Body>\r\n                                {info}\r\n                            </Card.Body>\r\n                        </Accordion.Collapse>\r\n                    </Card>\r\n                </Accordion>\r\n            )\r\n\r\n            currHour++;\r\n        }\r\n    } else {\r\n        dataCol1.push(<p>No hay datos para este día</p>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container mb-10\">\r\n\r\n            <Row className=\"mb-5\">\r\n                <Col sm={12} lg={6}>\r\n                    <div>\r\n                        <Button className=\"btn btn-light mb-4 mt-4\" block onClick={downloadFile}>Descargar datos del mes</Button>\r\n                        <Row className=\"mb-4\">\r\n                            <Col sm={6}>\r\n                                <Select\r\n                                    options={meses}\r\n                                    placeholder={'Mes'}\r\n                                    onChange={(target) => setInMes(target.value)}\r\n                                    defaultValue={meses[new Date().getMonth()]}\r\n                                />\r\n                            </Col>\r\n                            <Col sm={6}>\r\n                                <Select\r\n                                    options={anios}\r\n                                    placeholder={'Año'}\r\n                                    onChange={(target) => setInAnio(target.value)}\r\n                                    defaultValue={anios[anios.length - 1]}\r\n                                />\r\n                            </Col>\r\n                        </Row>\r\n                        <div className=\"detalles\">\r\n                            <h4>{value && value.format(\"DD/MM/YYYY\")} Detalle por hora</h4>\r\n                            <Row>\r\n                                <Col sm={6}>\r\n                                    {dataCol1}\r\n                                </Col>\r\n                                <Col sm={6}>\r\n                                    {dataCol2}\r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                    </div>\r\n                </Col>\r\n                <Col sm={12} lg={6} className=\"d-flex align-items-start justify-content-center\">\r\n                    <DatePicker value={value} onChange={setValue} />\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Calendario\r\n"],"sourceRoot":""}